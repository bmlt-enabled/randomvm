import{S as x,i as ee,s as te,e as d,k as C,t as R,c as h,a as b,n as L,g as z,d as a,b as u,f as D,H as r,J as se,K as ne,I as B,L as j,A as le,M as ie,h as H,j as re,N as oe,m as ce,O as ue,o as fe,x as de,u as he,v as me}from"../chunks/vendor-3da06047.js";function _e(k){let e,t;return{c(){e=d("div"),t=R("No meetings found for the next 24 hours.")},l(s){e=h(s,"DIV",{});var n=b(e);t=z(n,"No meetings found for the next 24 hours."),n.forEach(a)},m(s,n){D(s,e,n),r(e,t)},p:B,d(s){s&&a(e)}}}function pe(k){let e,t,s=k[0].name+"",n,f,y,m=k[0].startTime.toString()+"",p,_,i,o,v=k[0].link+"",T,S;return{c(){e=d("div"),t=d("strong"),n=R(s),f=C(),y=d("div"),p=R(m),_=C(),i=d("div"),o=d("a"),T=R(v),this.h()},l(c){e=h(c,"DIV",{});var l=b(e);t=h(l,"STRONG",{});var g=b(t);n=z(g,s),g.forEach(a),l.forEach(a),f=L(c),y=h(c,"DIV",{});var I=b(y);p=z(I,m),I.forEach(a),_=L(c),i=h(c,"DIV",{class:!0});var E=b(i);o=h(E,"A",{href:!0});var A=b(o);T=z(A,v),A.forEach(a),E.forEach(a),this.h()},h(){u(o,"href",S=k[0].link),u(i,"class","meeting-link svelte-1bgs718")},m(c,l){D(c,e,l),r(e,t),r(t,n),D(c,f,l),D(c,y,l),r(y,p),D(c,_,l),D(c,i,l),r(i,o),r(o,T)},p(c,l){l&1&&s!==(s=c[0].name+"")&&H(n,s),l&1&&m!==(m=c[0].startTime.toString()+"")&&H(p,m),l&1&&v!==(v=c[0].link+"")&&H(T,v),l&1&&S!==(S=c[0].link)&&u(o,"href",S)},d(c){c&&a(e),c&&a(f),c&&a(y),c&&a(_),c&&a(i)}}}function ae(k){let e,t,s,n,f,y,m;function p(o,v){return o[3]?ge:ve}let _=p(k),i=_(k);return{c(){e=d("div"),t=d("button"),i.c(),s=C(),n=d("span"),f=R("Copy Link"),this.h()},l(o){e=h(o,"DIV",{class:!0});var v=b(e);t=h(v,"BUTTON",{class:!0});var T=b(t);i.l(T),s=L(T),n=h(T,"SPAN",{});var S=b(n);f=z(S,"Copy Link"),S.forEach(a),T.forEach(a),v.forEach(a),this.h()},h(){u(t,"class","button is-small is-dark copy-button svelte-1bgs718"),u(e,"class","block has-text-centered")},m(o,v){D(o,e,v),r(e,t),i.m(t,null),r(t,s),r(t,n),r(n,f),y||(m=se(t,"click",k[6]),y=!0)},p(o,v){_!==(_=p(o))&&(i.d(1),i=_(o),i&&(i.c(),i.m(t,s)))},d(o){o&&a(e),i.d(),y=!1,m()}}}function ve(k){let e,t;return{c(){e=d("span"),t=d("i"),this.h()},l(s){e=h(s,"SPAN",{class:!0});var n=b(e);t=h(n,"I",{class:!0}),b(t).forEach(a),n.forEach(a),this.h()},h(){u(t,"class","far fa-copy"),u(e,"class","icon is-small")},m(s,n){D(s,e,n),r(e,t)},d(s){s&&a(e)}}}function ge(k){let e,t;return{c(){e=d("span"),t=d("i"),this.h()},l(s){e=h(s,"SPAN",{class:!0});var n=b(e);t=h(n,"I",{class:!0}),b(t).forEach(a),n.forEach(a),this.h()},h(){u(t,"class","fas fa-copy"),u(e,"class","icon is-small")},m(s,n){D(s,e,n),r(e,t)},d(s){s&&a(e)}}}function be(k){let e,t,s,n,f,y,m,p,_,i,o,v,T,S,c,l,g,I,E,A,O,U;function J(w,N){if(w[0])return pe;if(w[1]!==void 0)return _e}let q=J(k),M=q&&q(k),V=k[0]&&ae(k);return{c(){e=d("section"),t=d("div"),s=d("div"),n=d("h4"),f=R("Random Virtual Meeting"),y=C(),m=d("div"),p=d("div"),_=d("button"),i=R("Get A Random Meeting"),o=C(),v=d("div"),M&&M.c(),T=C(),V&&V.c(),S=C(),c=d("div"),l=d("a"),g=R("Ideas?"),I=R(`
                \u2022 Data from
                `),E=d("a"),A=R("virtual-na.org"),this.h()},l(w){e=h(w,"SECTION",{class:!0});var N=b(e);t=h(N,"DIV",{class:!0});var W=b(t);s=h(W,"DIV",{class:!0});var G=b(s);n=h(G,"H4",{class:!0});var $=b(n);f=z($,"Random Virtual Meeting"),$.forEach(a),y=L(G),m=h(G,"DIV",{class:!0});var P=b(m);p=h(P,"DIV",{class:!0});var F=b(p);_=h(F,"BUTTON",{class:!0});var Q=b(_);i=z(Q,"Get A Random Meeting"),Q.forEach(a),F.forEach(a),o=L(P),v=h(P,"DIV",{class:!0});var X=b(v);M&&M.l(X),X.forEach(a),T=L(P),V&&V.l(P),P.forEach(a),S=L(G),c=h(G,"DIV",{class:!0});var K=b(c);l=h(K,"A",{href:!0,target:!0});var Y=b(l);g=z(Y,"Ideas?"),Y.forEach(a),I=z(K,`
                \u2022 Data from
                `),E=h(K,"A",{href:!0,target:!0});var Z=b(E);A=z(Z,"virtual-na.org"),Z.forEach(a),K.forEach(a),G.forEach(a),W.forEach(a),N.forEach(a),this.h()},h(){u(n,"class","title is-4 has-text-centered"),u(_,"class","button is-fullwidth svelte-1bgs718"),_.disabled=k[2],ne(_,"is-loading",k[2]),u(p,"class","block"),u(v,"class","block is-shadowless has-text-centered"),u(m,"class","block"),u(l,"href","https://github.com/bmlt-enabled/randomvm/issues"),u(l,"target","_blank"),u(E,"href","https://virtual-na.org/meetings"),u(E,"target","_blank"),u(c,"class","box is-shadowless p-3 m-0 has-text-centered"),u(s,"class","card p-5"),u(t,"class","container"),u(e,"class","section p-5")},m(w,N){D(w,e,N),r(e,t),r(t,s),r(s,n),r(n,f),r(s,y),r(s,m),r(m,p),r(p,_),r(_,i),r(m,o),r(m,v),M&&M.m(v,null),r(m,T),V&&V.m(m,null),r(s,S),r(s,c),r(c,l),r(l,g),r(c,I),r(c,E),r(E,A),O||(U=se(_,"click",k[4]),O=!0)},p(w,[N]){N&4&&(_.disabled=w[2]),N&4&&ne(_,"is-loading",w[2]),q===(q=J(w))&&M?M.p(w,N):(M&&M.d(1),M=q&&q(w),M&&(M.c(),M.m(v,null))),w[0]?V?V.p(w,N):(V=ae(w),V.c(),V.m(m,null)):V&&(V.d(1),V=null)},i:B,o:B,d(w){w&&a(e),M&&M.d(),V&&V.d(),O=!1,U()}}}function ke(k,e,t){let s,n,f=[],y=!1,m=j(),p=!1;class _{constructor(g){this.name=g.meeting_name,this.startTime=this.getAdjustedStartTime(g),this.link=g.comments}getAdjustedStartTime(g){const I=parseInt(g.weekday_tinyint)===1?7:parseInt(g.weekday_tinyint)-1;let E=j().tz(g.time_zone||"UTC",!0).set({hour:parseInt(g.start_time.split(":")[0]),minute:parseInt(g.start_time.split(":")[1]),second:0}).isoWeekday(I);return E=E.clone().tz(j.tz.guess()),j.tz(j.tz.guess())>E&&E.add(1,"weeks"),E}}le(()=>{v()});function i(l){const g=[];if(l)for(const I of l)g.push(new _(I));return g}function o(l){const g=l.length<3?l.length:3,I=[];let E=30;for(;l.length>I.length;){for(const A of l.filter(O=>!I.includes(O))){const O=j.tz(j.tz.guess()),U=A.startTime.diff(O,"minutes");if(U>=-10&&U<=E&&(I.push(A),I.length>=g&&E>30))break}if(I.length>=g||E>1440)break;E+=15}return I}async function v(){t(2,y=!0);try{const I=await(await ie("https://bmlt.virtual-na.org/main_server/client_interface/jsonp/?switcher=GetSearchResults&data_field_key=weekday_tinyint,start_time,time_zone,meeting_name,comments")).json(),E=i(I);t(1,n=o(E)),f=[],T(),t(2,y=!1)}catch(l){console.log("parsing failed",l)}}function T(){if(j().diff(m,"seconds")>900){v(),m=j();return}n.length?f.length==n.length&&(f.length>1?f=[f.pop()]:f=[]):t(0,s=null);const l=n.filter(g=>!f.includes(g));t(0,s=l[Math.floor(Math.random()*l.length)]),f.push(s),t(3,p=!1)}function S(l){t(3,p=!0),navigator.clipboard.writeText(l)}return[s,n,y,p,T,S,()=>S(s.link)]}class Ee extends x{constructor(e){super();ee(this,e,ke,be,te,{})}}function ye(k){let e,t,s,n,f,y,m,p,_;return p=new Ee({}),{c(){e=d("link"),t=d("link"),s=d("meta"),n=d("meta"),f=d("script"),m=C(),re(p.$$.fragment),this.h()},l(i){const o=oe('[data-svelte="svelte-1ouqje7"]',document.head);e=h(o,"LINK",{rel:!0,href:!0}),t=h(o,"LINK",{rel:!0,href:!0}),s=h(o,"META",{name:!0,content:!0}),n=h(o,"META",{name:!0,content:!0}),f=h(o,"SCRIPT",{src:!0,"data-auto-a11y":!0});var v=b(f);v.forEach(a),o.forEach(a),m=L(i),ce(p.$$.fragment,i),this.h()},h(){u(e,"rel","manifest"),u(e,"href","manifest.json"),u(t,"rel","apple-touch-icon"),u(t,"href","apple-icon-180.png"),u(s,"name","mobile-web-app-capable"),u(s,"content","yes"),u(n,"name","apple-mobile-web-app-capable"),u(n,"content","yes"),document.title="Random Virtual Meeting",ue(f.src,y="https://use.fontawesome.com/releases/v5.15.4/js/all.js")||u(f,"src",y),u(f,"data-auto-a11y","true")},m(i,o){r(document.head,e),r(document.head,t),r(document.head,s),r(document.head,n),r(document.head,f),D(i,m,o),fe(p,i,o),_=!0},p:B,i(i){_||(de(p.$$.fragment,i),_=!0)},o(i){he(p.$$.fragment,i),_=!1},d(i){a(e),a(t),a(s),a(n),a(f),i&&a(m),me(p,i)}}}class we extends x{constructor(e){super();ee(this,e,null,ye,te,{})}}export{we as default};
