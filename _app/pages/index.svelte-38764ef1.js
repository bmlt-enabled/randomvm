import{S as te,i as se,s as ae,e as d,k as q,t as N,c as m,a as b,n as O,g as R,d as i,b as o,f as C,H as l,J as ne,K as le,I as W,L as P,A as oe,M as ce,h as K,j as fe,N as ue,m as de,O as me,o as he,x as _e,u as pe,v as ve}from"../chunks/vendor-3da06047.js";function ge(_){let e;return{c(){e=N("No meetings found for the next 24 hours.")},l(t){e=R(t,"No meetings found for the next 24 hours.")},m(t,s){C(t,e,s)},p:W,d(t){t&&i(e)}}}function be(_){let e,t=_[0].name+"",s,a,n,y,k=_[0].startTime.format("dddd")+"",g,v,r=_[0].startTime.format("h:mma")+"",f,I,E,V,L=_[0].link+"",u,c,w,T,h=_[0].info&&ie(_);return{c(){e=d("h4"),s=N(t),a=q(),n=d("ul"),y=d("li"),g=N(k),v=N(" at "),f=N(r),I=q(),E=d("li"),V=d("a"),u=N(L),w=N(`
                                    \xA0`),T=q(),h&&h.c(),this.h()},l(p){e=m(p,"H4",{});var M=b(e);s=R(M,t),M.forEach(i),a=O(p),n=m(p,"UL",{});var U=b(n);y=m(U,"LI",{});var H=b(y);g=R(H,k),v=R(H," at "),f=R(H,r),H.forEach(i),I=O(U),E=m(U,"LI",{class:!0});var z=b(E);V=m(z,"A",{href:!0,target:!0});var A=b(V);u=R(A,L),A.forEach(i),w=R(z,`
                                    \xA0`),z.forEach(i),T=O(U),h&&h.l(U),U.forEach(i),this.h()},h(){o(V,"href",c=_[0].link),o(V,"target","_blank"),o(E,"class","meeting-link svelte-14s9879")},m(p,M){C(p,e,M),l(e,s),C(p,a,M),C(p,n,M),l(n,y),l(y,g),l(y,v),l(y,f),l(n,I),l(n,E),l(E,V),l(V,u),l(E,w),l(n,T),h&&h.m(n,null)},p(p,M){M&1&&t!==(t=p[0].name+"")&&K(s,t),M&1&&k!==(k=p[0].startTime.format("dddd")+"")&&K(g,k),M&1&&r!==(r=p[0].startTime.format("h:mma")+"")&&K(f,r),M&1&&L!==(L=p[0].link+"")&&K(u,L),M&1&&c!==(c=p[0].link)&&o(V,"href",c),p[0].info?h?h.p(p,M):(h=ie(p),h.c(),h.m(n,null)):h&&(h.d(1),h=null)},d(p){p&&i(e),p&&i(a),p&&i(n),h&&h.d()}}}function ie(_){let e,t=_[0].info+"",s;return{c(){e=d("li"),s=N(t)},l(a){e=m(a,"LI",{});var n=b(e);s=R(n,t),n.forEach(i)},m(a,n){C(a,e,n),l(e,s)},p(a,n){n&1&&t!==(t=a[0].info+"")&&K(s,t)},d(a){a&&i(e)}}}function re(_){let e,t,s,a,n,y,k;function g(f,I){return f[3]?Ee:ke}let v=g(_),r=v(_);return{c(){e=d("div"),t=d("button"),r.c(),s=q(),a=d("span"),n=N("Copy Link"),this.h()},l(f){e=m(f,"DIV",{class:!0});var I=b(e);t=m(I,"BUTTON",{class:!0});var E=b(t);r.l(E),s=O(E),a=m(E,"SPAN",{});var V=b(a);n=R(V,"Copy Link"),V.forEach(i),E.forEach(i),I.forEach(i),this.h()},h(){o(t,"class","button is-small copy-button svelte-14s9879"),o(e,"class","block has-text-centered")},m(f,I){C(f,e,I),l(e,t),r.m(t,null),l(t,s),l(t,a),l(a,n),y||(k=ne(t,"click",_[6]),y=!0)},p(f,I){v!==(v=g(f))&&(r.d(1),r=v(f),r&&(r.c(),r.m(t,s)))},d(f){f&&i(e),r.d(),y=!1,k()}}}function ke(_){let e,t;return{c(){e=d("span"),t=d("i"),this.h()},l(s){e=m(s,"SPAN",{class:!0});var a=b(e);t=m(a,"I",{class:!0}),b(t).forEach(i),a.forEach(i),this.h()},h(){o(t,"class","far fa-copy"),o(e,"class","icon is-small")},m(s,a){C(s,e,a),l(e,t)},d(s){s&&i(e)}}}function Ee(_){let e,t;return{c(){e=d("span"),t=d("i"),this.h()},l(s){e=m(s,"SPAN",{class:!0});var a=b(e);t=m(a,"I",{class:!0}),b(t).forEach(i),a.forEach(i),this.h()},h(){o(t,"class","fas fa-copy"),o(e,"class","icon is-small")},m(s,a){C(s,e,a),l(e,t)},d(s){s&&i(e)}}}function ye(_){let e,t,s,a,n,y,k,g,v,r,f,I,E,V,L,u,c,w,T,h,p,M,U;function H(S,j){if(S[0])return be;if(S[1]!==void 0)return ge}let z=H(_),A=z&&z(_),D=_[0]&&re(_);return{c(){e=d("section"),t=d("div"),s=d("div"),a=d("h4"),n=N("Random Virtual Meeting"),y=q(),k=d("div"),g=d("div"),v=d("button"),r=N("Get A Random Meeting"),f=q(),I=d("div"),E=d("div"),A&&A.c(),V=q(),D&&D.c(),L=q(),u=d("div"),c=d("a"),w=N("Ideas?"),T=N(`
                \u2022 Data from
                `),h=d("a"),p=N("virtual-na.org"),this.h()},l(S){e=m(S,"SECTION",{class:!0});var j=b(e);t=m(j,"DIV",{class:!0});var $=b(t);s=m($,"DIV",{class:!0});var G=b(s);a=m(G,"H4",{class:!0});var F=b(a);n=R(F,"Random Virtual Meeting"),F.forEach(i),y=O(G),k=m(G,"DIV",{class:!0});var B=b(k);g=m(B,"DIV",{class:!0});var Q=b(g);v=m(Q,"BUTTON",{class:!0});var X=b(v);r=R(X,"Get A Random Meeting"),X.forEach(i),Q.forEach(i),f=O(B),I=m(B,"DIV",{class:!0});var Y=b(I);E=m(Y,"DIV",{class:!0});var Z=b(E);A&&A.l(Z),Z.forEach(i),Y.forEach(i),B.forEach(i),V=O(G),D&&D.l(G),L=O(G),u=m(G,"DIV",{class:!0});var J=b(u);c=m(J,"A",{href:!0,target:!0});var x=b(c);w=R(x,"Ideas?"),x.forEach(i),T=R(J,`
                \u2022 Data from
                `),h=m(J,"A",{href:!0,target:!0});var ee=b(h);p=R(ee,"virtual-na.org"),ee.forEach(i),J.forEach(i),G.forEach(i),$.forEach(i),j.forEach(i),this.h()},h(){o(a,"class","title is-4 has-text-centered"),o(v,"class","button is-fullwidth svelte-14s9879"),v.disabled=_[2],le(v,"is-loading",_[2]),o(g,"class","block"),o(E,"class","content"),o(I,"class","block is-shadowless p-2"),o(k,"class","block"),o(c,"href","https://github.com/bmlt-enabled/randomvm/issues"),o(c,"target","_blank"),o(h,"href","https://virtual-na.org/meetings"),o(h,"target","_blank"),o(u,"class","box is-shadowless p-3 m-0 has-text-centered"),o(s,"class","card p-5"),o(t,"class","randomvm container svelte-14s9879"),o(e,"class","section p-5")},m(S,j){C(S,e,j),l(e,t),l(t,s),l(s,a),l(a,n),l(s,y),l(s,k),l(k,g),l(g,v),l(v,r),l(k,f),l(k,I),l(I,E),A&&A.m(E,null),l(s,V),D&&D.m(s,null),l(s,L),l(s,u),l(u,c),l(c,w),l(u,T),l(u,h),l(h,p),M||(U=ne(v,"click",_[4]),M=!0)},p(S,[j]){j&4&&(v.disabled=S[2]),j&4&&le(v,"is-loading",S[2]),z===(z=H(S))&&A?A.p(S,j):(A&&A.d(1),A=z&&z(S),A&&(A.c(),A.m(E,null))),S[0]?D?D.p(S,j):(D=re(S),D.c(),D.m(s,L)):D&&(D.d(1),D=null)},i:W,o:W,d(S){S&&i(e),A&&A.d(),D&&D.d(),M=!1,U()}}}function Ie(_,e,t){let s,a,n=[],y=!1,k=P(),g=!1;class v{constructor(c){this.name=c.meeting_name,this.startTime=this.getAdjustedStartTime(c),this.link=c.comments,this.info=c.location_info}getAdjustedStartTime(c){const w=parseInt(c.weekday_tinyint)===1?7:parseInt(c.weekday_tinyint)-1;let T=P().tz(c.time_zone||"UTC",!0).set({hour:parseInt(c.start_time.split(":")[0]),minute:parseInt(c.start_time.split(":")[1]),second:0}).isoWeekday(w);return T=T.clone().tz(P.tz.guess()),P.tz(P.tz.guess())>T&&T.add(1,"weeks"),T}}oe(()=>{I()});function r(u){const c=[];if(u)for(const w of u)c.push(new v(w));return c}function f(u){const c=u.length<3?u.length:3,w=[];let T=30;for(;u.length>w.length;){for(const h of u.filter(p=>!w.includes(p))){if(!h.link)continue;const p=P.tz(P.tz.guess()),M=h.startTime.diff(p,"minutes");if(M>=-10&&M<=T&&(w.push(h),w.length>=c&&T>30))break}if(w.length>=c||T>1440)break;T+=15}return w}async function I(){t(2,y=!0);try{const w=await(await ce("https://bmlt.virtual-na.org/main_server/client_interface/jsonp/?switcher=GetSearchResults&data_field_key=weekday_tinyint,start_time,time_zone,meeting_name,comments,location_info")).json(),T=r(w);t(1,a=f(T)),n=[],E(),t(2,y=!1)}catch(u){console.log("parsing failed",u)}}function E(){if(P().diff(k,"seconds")>900){I(),k=P();return}a.length?n.length==a.length&&(n.length>1?n=[n.pop()]:n=[]):t(0,s=null);const u=a.filter(c=>!n.includes(c));t(0,s=u[Math.floor(Math.random()*u.length)]),n.push(s),t(3,g=!1)}function V(u){t(3,g=!0),navigator.clipboard.writeText(u)}return[s,a,y,g,E,V,()=>V(s.link)]}class we extends te{constructor(e){super();se(this,e,Ie,ye,ae,{})}}function Te(_){let e,t,s,a,n,y,k,g,v;return g=new we({}),{c(){e=d("link"),t=d("link"),s=d("meta"),a=d("meta"),n=d("script"),k=q(),fe(g.$$.fragment),this.h()},l(r){const f=ue('[data-svelte="svelte-1ouqje7"]',document.head);e=m(f,"LINK",{rel:!0,href:!0}),t=m(f,"LINK",{rel:!0,href:!0}),s=m(f,"META",{name:!0,content:!0}),a=m(f,"META",{name:!0,content:!0}),n=m(f,"SCRIPT",{src:!0,"data-auto-a11y":!0});var I=b(n);I.forEach(i),f.forEach(i),k=O(r),de(g.$$.fragment,r),this.h()},h(){o(e,"rel","manifest"),o(e,"href","manifest.json"),o(t,"rel","apple-touch-icon"),o(t,"href","apple-icon-180.png"),o(s,"name","mobile-web-app-capable"),o(s,"content","yes"),o(a,"name","apple-mobile-web-app-capable"),o(a,"content","yes"),document.title="Random Virtual Meeting",me(n.src,y="https://use.fontawesome.com/releases/v5.15.4/js/all.js")||o(n,"src",y),o(n,"data-auto-a11y","true")},m(r,f){l(document.head,e),l(document.head,t),l(document.head,s),l(document.head,a),l(document.head,n),C(r,k,f),he(g,r,f),v=!0},p:W,i(r){v||(_e(g.$$.fragment,r),v=!0)},o(r){pe(g.$$.fragment,r),v=!1},d(r){i(e),i(t),i(s),i(a),i(n),r&&i(k),ve(g,r)}}}class Ae extends te{constructor(e){super();se(this,e,null,Te,ae,{})}}export{Ae as default};
