import{S as te,i as se,s as ae,e as _,k as U,t as D,c as p,a as b,n as q,g as L,d as l,b as o,f as j,H as i,J as ne,K as le,I as W,L as O,A as oe,M as ce,h as K,j as fe,N as ue,m as de,O as me,o as he,x as _e,u as pe,v as ve}from"../chunks/vendor-3da06047.js";function ge(m){let e;return{c(){e=D("No meetings found for the next 24 hours.")},l(t){e=L(t,"No meetings found for the next 24 hours.")},m(t,s){j(t,e,s)},p:W,d(t){t&&l(e)}}}function be(m){let e,t=m[0].name+"",s,a,n,E,k=m[0].startTime.format("dddd")+"",g,v,r=m[0].startTime.format("h:mma")+"",d,y,w,M,N=m[0].link+"",h,u,T,c=m[0].info&&ie(m);return{c(){e=_("h4"),s=D(t),a=U(),n=_("ul"),E=_("li"),g=D(k),v=D(" at "),d=D(r),y=U(),w=_("li"),M=_("a"),h=D(N),T=U(),c&&c.c(),this.h()},l(f){e=p(f,"H4",{});var I=b(e);s=L(I,t),I.forEach(l),a=q(f),n=p(f,"UL",{});var S=b(n);E=p(S,"LI",{});var G=b(E);g=L(G,k),v=L(G," at "),d=L(G,r),G.forEach(l),y=q(S),w=p(S,"LI",{class:!0});var H=b(w);M=p(H,"A",{href:!0,target:!0});var C=b(M);h=L(C,N),C.forEach(l),H.forEach(l),T=q(S),c&&c.l(S),S.forEach(l),this.h()},h(){o(M,"href",u=m[0].link),o(M,"target","_blank"),o(w,"class","meeting-link svelte-1vwrx0f")},m(f,I){j(f,e,I),i(e,s),j(f,a,I),j(f,n,I),i(n,E),i(E,g),i(E,v),i(E,d),i(n,y),i(n,w),i(w,M),i(M,h),i(n,T),c&&c.m(n,null)},p(f,I){I&1&&t!==(t=f[0].name+"")&&K(s,t),I&1&&k!==(k=f[0].startTime.format("dddd")+"")&&K(g,k),I&1&&r!==(r=f[0].startTime.format("h:mma")+"")&&K(d,r),I&1&&N!==(N=f[0].link+"")&&K(h,N),I&1&&u!==(u=f[0].link)&&o(M,"href",u),f[0].info?c?c.p(f,I):(c=ie(f),c.c(),c.m(n,null)):c&&(c.d(1),c=null)},d(f){f&&l(e),f&&l(a),f&&l(n),c&&c.d()}}}function ie(m){let e,t=m[0].info+"",s;return{c(){e=_("li"),s=D(t)},l(a){e=p(a,"LI",{});var n=b(e);s=L(n,t),n.forEach(l)},m(a,n){j(a,e,n),i(e,s)},p(a,n){n&1&&t!==(t=a[0].info+"")&&K(s,t)},d(a){a&&l(e)}}}function re(m){let e,t,s,a,n,E,k;function g(d,y){return d[3]?Ee:ke}let v=g(m),r=v(m);return{c(){e=_("div"),t=_("button"),r.c(),s=U(),a=_("span"),n=D("Copy Link"),this.h()},l(d){e=p(d,"DIV",{class:!0});var y=b(e);t=p(y,"BUTTON",{class:!0});var w=b(t);r.l(w),s=q(w),a=p(w,"SPAN",{});var M=b(a);n=L(M,"Copy Link"),M.forEach(l),w.forEach(l),y.forEach(l),this.h()},h(){o(t,"class","button is-small copy-button svelte-1vwrx0f"),o(e,"class","block has-text-centered")},m(d,y){j(d,e,y),i(e,t),r.m(t,null),i(t,s),i(t,a),i(a,n),E||(k=ne(t,"click",m[6]),E=!0)},p(d,y){v!==(v=g(d))&&(r.d(1),r=v(d),r&&(r.c(),r.m(t,s)))},d(d){d&&l(e),r.d(),E=!1,k()}}}function ke(m){let e,t;return{c(){e=_("span"),t=_("i"),this.h()},l(s){e=p(s,"SPAN",{class:!0});var a=b(e);t=p(a,"I",{class:!0}),b(t).forEach(l),a.forEach(l),this.h()},h(){o(t,"class","far fa-copy"),o(e,"class","icon is-small")},m(s,a){j(s,e,a),i(e,t)},d(s){s&&l(e)}}}function Ee(m){let e,t;return{c(){e=_("span"),t=_("i"),this.h()},l(s){e=p(s,"SPAN",{class:!0});var a=b(e);t=p(a,"I",{class:!0}),b(t).forEach(l),a.forEach(l),this.h()},h(){o(t,"class","fas fa-copy"),o(e,"class","icon is-small")},m(s,a){j(s,e,a),i(e,t)},d(s){s&&l(e)}}}function ye(m){let e,t,s,a,n,E,k,g,v,r,d,y,w,M,N,h,u,T,c,f,I,S,G;function H(V,z){if(V[0])return be;if(V[1]!==void 0)return ge}let C=H(m),A=C&&C(m),R=m[0]&&re(m);return{c(){e=_("section"),t=_("div"),s=_("div"),a=_("h4"),n=D("Random Virtual Meeting"),E=U(),k=_("div"),g=_("div"),v=_("button"),r=D("Get A Random Meeting"),d=U(),y=_("div"),w=_("div"),A&&A.c(),M=U(),R&&R.c(),N=U(),h=_("div"),u=_("a"),T=D("Ideas?"),c=D(`
                \u2022 Data from
                `),f=_("a"),I=D("virtual-na.org"),this.h()},l(V){e=p(V,"SECTION",{class:!0});var z=b(e);t=p(z,"DIV",{class:!0});var $=b(t);s=p($,"DIV",{class:!0});var P=b(s);a=p(P,"H4",{class:!0});var F=b(a);n=L(F,"Random Virtual Meeting"),F.forEach(l),E=q(P),k=p(P,"DIV",{class:!0});var B=b(k);g=p(B,"DIV",{class:!0});var Q=b(g);v=p(Q,"BUTTON",{class:!0});var X=b(v);r=L(X,"Get A Random Meeting"),X.forEach(l),Q.forEach(l),d=q(B),y=p(B,"DIV",{class:!0});var Y=b(y);w=p(Y,"DIV",{class:!0});var Z=b(w);A&&A.l(Z),Z.forEach(l),Y.forEach(l),B.forEach(l),M=q(P),R&&R.l(P),N=q(P),h=p(P,"DIV",{class:!0});var J=b(h);u=p(J,"A",{href:!0,target:!0});var x=b(u);T=L(x,"Ideas?"),x.forEach(l),c=L(J,`
                \u2022 Data from
                `),f=p(J,"A",{href:!0,target:!0});var ee=b(f);I=L(ee,"virtual-na.org"),ee.forEach(l),J.forEach(l),P.forEach(l),$.forEach(l),z.forEach(l),this.h()},h(){o(a,"class","title is-4 has-text-centered"),o(v,"class","button is-fullwidth svelte-1vwrx0f"),v.disabled=m[2],le(v,"is-loading",m[2]),o(g,"class","block"),o(w,"class","content"),o(y,"class","block is-shadowless p-2"),o(k,"class","block"),o(u,"href","https://github.com/bmlt-enabled/randomvm/issues"),o(u,"target","_blank"),o(f,"href","https://virtual-na.org/meetings"),o(f,"target","_blank"),o(h,"class","box is-shadowless p-3 m-0 has-text-centered"),o(s,"class","card p-5"),o(t,"class","randomvm container svelte-1vwrx0f"),o(e,"class","section p-5")},m(V,z){j(V,e,z),i(e,t),i(t,s),i(s,a),i(a,n),i(s,E),i(s,k),i(k,g),i(g,v),i(v,r),i(k,d),i(k,y),i(y,w),A&&A.m(w,null),i(s,M),R&&R.m(s,null),i(s,N),i(s,h),i(h,u),i(u,T),i(h,c),i(h,f),i(f,I),S||(G=ne(v,"click",m[4]),S=!0)},p(V,[z]){z&4&&(v.disabled=V[2]),z&4&&le(v,"is-loading",V[2]),C===(C=H(V))&&A?A.p(V,z):(A&&A.d(1),A=C&&C(V),A&&(A.c(),A.m(w,null))),V[0]?R?R.p(V,z):(R=re(V),R.c(),R.m(s,N)):R&&(R.d(1),R=null)},i:W,o:W,d(V){V&&l(e),A&&A.d(),R&&R.d(),S=!1,G()}}}function we(m){let e;try{e=new URL(m)}catch(t){return!1}return e.protocol==="http:"||e.protocol==="https:"}function Ie(m,e,t){let s,a,n=[],E=!1,k=O(),g=!1;class v{constructor(u){this.name=u.meeting_name,this.startTime=this.getAdjustedStartTime(u),this.link=u.comments,this.info=u.location_info}getAdjustedStartTime(u){const T=parseInt(u.weekday_tinyint)===1?7:parseInt(u.weekday_tinyint)-1;let c=O().tz(u.time_zone||"UTC",!0).set({hour:parseInt(u.start_time.split(":")[0]),minute:parseInt(u.start_time.split(":")[1]),second:0}).isoWeekday(T);return c=c.clone().tz(O.tz.guess()),O.tz(O.tz.guess())>c&&c.add(1,"weeks"),c}}oe(()=>{y()});function r(h){const u=[];if(h)for(const T of h)u.push(new v(T));return u}function d(h){const u=h.length<3?h.length:3,T=[];let c=30;for(;h.length>T.length;){for(const f of h.filter(I=>!T.includes(I))){if(!we(f.link))continue;const I=O.tz(O.tz.guess()),S=f.startTime.diff(I,"minutes");if(S>=-10&&S<=c&&(T.push(f),T.length>=u&&c>30))break}if(T.length>=u||c>1440)break;c+=15}return T}async function y(){t(2,E=!0);try{const T=await(await ce("https://bmlt.virtual-na.org/main_server/client_interface/jsonp/?switcher=GetSearchResults&data_field_key=weekday_tinyint,start_time,time_zone,meeting_name,comments,location_info")).json(),c=r(T);t(1,a=d(c)),n=[],w(),t(2,E=!1)}catch(h){console.log("parsing failed",h)}}function w(){if(O().diff(k,"seconds")>900){y(),k=O();return}a.length?n.length==a.length&&(n.length>1?n=[n.pop()]:n=[]):t(0,s=null);const h=a.filter(u=>!n.includes(u));t(0,s=h[Math.floor(Math.random()*h.length)]),n.push(s),t(3,g=!1)}function M(h){t(3,g=!0),navigator.clipboard.writeText(h)}return[s,a,E,g,w,M,()=>M(s.link)]}class Te extends te{constructor(e){super();se(this,e,Ie,ye,ae,{})}}function Me(m){let e,t,s,a,n,E,k,g,v;return g=new Te({}),{c(){e=_("link"),t=_("link"),s=_("meta"),a=_("meta"),n=_("script"),k=U(),fe(g.$$.fragment),this.h()},l(r){const d=ue('[data-svelte="svelte-1ouqje7"]',document.head);e=p(d,"LINK",{rel:!0,href:!0}),t=p(d,"LINK",{rel:!0,href:!0}),s=p(d,"META",{name:!0,content:!0}),a=p(d,"META",{name:!0,content:!0}),n=p(d,"SCRIPT",{src:!0,"data-auto-a11y":!0});var y=b(n);y.forEach(l),d.forEach(l),k=q(r),de(g.$$.fragment,r),this.h()},h(){o(e,"rel","manifest"),o(e,"href","manifest.json"),o(t,"rel","apple-touch-icon"),o(t,"href","apple-icon-180.png"),o(s,"name","mobile-web-app-capable"),o(s,"content","yes"),o(a,"name","apple-mobile-web-app-capable"),o(a,"content","yes"),document.title="Random Virtual Meeting",me(n.src,E="https://use.fontawesome.com/releases/v5.15.4/js/all.js")||o(n,"src",E),o(n,"data-auto-a11y","true")},m(r,d){i(document.head,e),i(document.head,t),i(document.head,s),i(document.head,a),i(document.head,n),j(r,k,d),he(g,r,d),v=!0},p:W,i(r){v||(_e(g.$$.fragment,r),v=!0)},o(r){pe(g.$$.fragment,r),v=!1},d(r){l(e),l(t),l(s),l(a),l(n),r&&l(k),ve(g,r)}}}class Ae extends te{constructor(e){super();se(this,e,null,Me,ae,{})}}export{Ae as default};
