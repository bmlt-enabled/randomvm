import{S as te,i as se,s as ae,e as h,k as U,t as N,c as _,a as b,n as q,g as R,d as l,b as o,f as j,H as i,J as ne,K as le,I as W,L as O,A as oe,M as ce,h as K,j as fe,N as ue,m as de,O as me,o as he,x as _e,u as pe,v as ve}from"../chunks/vendor-3da06047.js";function ge(p){let e;return{c(){e=N("No meetings found for the next 24 hours.")},l(t){e=R(t,"No meetings found for the next 24 hours.")},m(t,s){j(t,e,s)},p:W,d(t){t&&l(e)}}}function be(p){let e,t=p[0].name+"",s,a,n,E,k=p[0].startTime.format("dddd")+"",g,v,r=p[0].startTime.format("h:mma")+"",d,y,w,M,L=p[0].link+"",m,u,T,c=p[0].info&&ie(p);return{c(){e=h("h4"),s=N(t),a=U(),n=h("ul"),E=h("li"),g=N(k),v=N(" at "),d=N(r),y=U(),w=h("li"),M=h("a"),m=N(L),T=U(),c&&c.c(),this.h()},l(f){e=_(f,"H4",{});var I=b(e);s=R(I,t),I.forEach(l),a=q(f),n=_(f,"UL",{});var D=b(n);E=_(D,"LI",{});var G=b(E);g=R(G,k),v=R(G," at "),d=R(G,r),G.forEach(l),y=q(D),w=_(D,"LI",{class:!0});var H=b(w);M=_(H,"A",{href:!0,target:!0});var C=b(M);m=R(C,L),C.forEach(l),H.forEach(l),T=q(D),c&&c.l(D),D.forEach(l),this.h()},h(){o(M,"href",u=p[0].link),o(M,"target","_blank"),o(w,"class","meeting-link svelte-1vwrx0f")},m(f,I){j(f,e,I),i(e,s),j(f,a,I),j(f,n,I),i(n,E),i(E,g),i(E,v),i(E,d),i(n,y),i(n,w),i(w,M),i(M,m),i(n,T),c&&c.m(n,null)},p(f,I){I&1&&t!==(t=f[0].name+"")&&K(s,t),I&1&&k!==(k=f[0].startTime.format("dddd")+"")&&K(g,k),I&1&&r!==(r=f[0].startTime.format("h:mma")+"")&&K(d,r),I&1&&L!==(L=f[0].link+"")&&K(m,L),I&1&&u!==(u=f[0].link)&&o(M,"href",u),f[0].info?c?c.p(f,I):(c=ie(f),c.c(),c.m(n,null)):c&&(c.d(1),c=null)},d(f){f&&l(e),f&&l(a),f&&l(n),c&&c.d()}}}function ie(p){let e,t=p[0].info+"",s;return{c(){e=h("li"),s=N(t)},l(a){e=_(a,"LI",{});var n=b(e);s=R(n,t),n.forEach(l)},m(a,n){j(a,e,n),i(e,s)},p(a,n){n&1&&t!==(t=a[0].info+"")&&K(s,t)},d(a){a&&l(e)}}}function re(p){let e,t,s,a,n,E,k;function g(d,y){return d[3]?Ee:ke}let v=g(p),r=v(p);return{c(){e=h("div"),t=h("button"),r.c(),s=U(),a=h("span"),n=N("Copy Link"),this.h()},l(d){e=_(d,"DIV",{class:!0});var y=b(e);t=_(y,"BUTTON",{class:!0});var w=b(t);r.l(w),s=q(w),a=_(w,"SPAN",{});var M=b(a);n=R(M,"Copy Link"),M.forEach(l),w.forEach(l),y.forEach(l),this.h()},h(){o(t,"class","button is-small copy-button svelte-1vwrx0f"),o(e,"class","block has-text-centered")},m(d,y){j(d,e,y),i(e,t),r.m(t,null),i(t,s),i(t,a),i(a,n),E||(k=ne(t,"click",p[6]),E=!0)},p(d,y){v!==(v=g(d))&&(r.d(1),r=v(d),r&&(r.c(),r.m(t,s)))},d(d){d&&l(e),r.d(),E=!1,k()}}}function ke(p){let e,t;return{c(){e=h("span"),t=h("i"),this.h()},l(s){e=_(s,"SPAN",{class:!0});var a=b(e);t=_(a,"I",{class:!0}),b(t).forEach(l),a.forEach(l),this.h()},h(){o(t,"class","far fa-copy"),o(e,"class","icon is-small")},m(s,a){j(s,e,a),i(e,t)},d(s){s&&l(e)}}}function Ee(p){let e,t;return{c(){e=h("span"),t=h("i"),this.h()},l(s){e=_(s,"SPAN",{class:!0});var a=b(e);t=_(a,"I",{class:!0}),b(t).forEach(l),a.forEach(l),this.h()},h(){o(t,"class","fas fa-copy"),o(e,"class","icon is-small")},m(s,a){j(s,e,a),i(e,t)},d(s){s&&l(e)}}}function ye(p){let e,t,s,a,n,E,k,g,v,r,d,y,w,M,L,m,u,T,c,f,I,D,G;function H(A,z){if(A[0])return be;if(A[1]!==void 0)return ge}let C=H(p),V=C&&C(p),S=p[0]&&re(p);return{c(){e=h("section"),t=h("div"),s=h("div"),a=h("h4"),n=N("Random Virtual Meeting"),E=U(),k=h("div"),g=h("div"),v=h("button"),r=N("Get A Random Meeting"),d=U(),y=h("div"),w=h("div"),V&&V.c(),M=U(),S&&S.c(),L=U(),m=h("div"),u=h("a"),T=N("Ideas?"),c=N(`
                \u2022 Data from
                `),f=h("a"),I=N("virtual-na.org"),this.h()},l(A){e=_(A,"SECTION",{class:!0});var z=b(e);t=_(z,"DIV",{class:!0});var $=b(t);s=_($,"DIV",{class:!0});var P=b(s);a=_(P,"H4",{class:!0});var F=b(a);n=R(F,"Random Virtual Meeting"),F.forEach(l),E=q(P),k=_(P,"DIV",{class:!0});var B=b(k);g=_(B,"DIV",{class:!0});var Q=b(g);v=_(Q,"BUTTON",{class:!0});var X=b(v);r=R(X,"Get A Random Meeting"),X.forEach(l),Q.forEach(l),d=q(B),y=_(B,"DIV",{class:!0});var Y=b(y);w=_(Y,"DIV",{class:!0});var Z=b(w);V&&V.l(Z),Z.forEach(l),Y.forEach(l),B.forEach(l),M=q(P),S&&S.l(P),L=q(P),m=_(P,"DIV",{class:!0});var J=b(m);u=_(J,"A",{href:!0,target:!0});var x=b(u);T=R(x,"Ideas?"),x.forEach(l),c=R(J,`
                \u2022 Data from
                `),f=_(J,"A",{href:!0,target:!0});var ee=b(f);I=R(ee,"virtual-na.org"),ee.forEach(l),J.forEach(l),P.forEach(l),$.forEach(l),z.forEach(l),this.h()},h(){o(a,"class","title is-4 has-text-centered"),o(v,"class","button is-fullwidth svelte-1vwrx0f"),v.disabled=p[2],le(v,"is-loading",p[2]),o(g,"class","block"),o(w,"class","content"),o(y,"class","block is-shadowless p-2"),o(k,"class","block"),o(u,"href","https://github.com/bmlt-enabled/randomvm/issues"),o(u,"target","_blank"),o(f,"href","https://virtual-na.org/meetings"),o(f,"target","_blank"),o(m,"class","box is-shadowless p-3 m-0 has-text-centered"),o(s,"class","card p-5"),o(t,"class","randomvm container svelte-1vwrx0f"),o(e,"class","section p-5")},m(A,z){j(A,e,z),i(e,t),i(t,s),i(s,a),i(a,n),i(s,E),i(s,k),i(k,g),i(g,v),i(v,r),i(k,d),i(k,y),i(y,w),V&&V.m(w,null),i(s,M),S&&S.m(s,null),i(s,L),i(s,m),i(m,u),i(u,T),i(m,c),i(m,f),i(f,I),D||(G=ne(v,"click",p[4]),D=!0)},p(A,[z]){z&4&&(v.disabled=A[2]),z&4&&le(v,"is-loading",A[2]),C===(C=H(A))&&V?V.p(A,z):(V&&V.d(1),V=C&&C(A),V&&(V.c(),V.m(w,null))),A[0]?S?S.p(A,z):(S=re(A),S.c(),S.m(s,L)):S&&(S.d(1),S=null)},i:W,o:W,d(A){A&&l(e),V&&V.d(),S&&S.d(),D=!1,G()}}}function we(p,e,t){let s,a,n=[],E=!1,k=O(),g=!1;class v{constructor(u){this.name=u.meeting_name,this.startTime=this.getAdjustedStartTime(u),this.link=u.comments,this.info=u.location_info}getAdjustedStartTime(u){const T=parseInt(u.weekday_tinyint)===1?7:parseInt(u.weekday_tinyint)-1;let c=O().tz(u.time_zone||"UTC",!0).set({hour:parseInt(u.start_time.split(":")[0]),minute:parseInt(u.start_time.split(":")[1]),second:0}).isoWeekday(T);return c=c.clone().tz(O.tz.guess()),O.tz(O.tz.guess())>c&&c.add(1,"weeks"),c}}oe(()=>{y()});function r(m){const u=[];if(m)for(const T of m)u.push(new v(T));return u}function d(m){const u=m.length<3?m.length:3,T=[];let c=30;for(;m.length>T.length;){for(const f of m.filter(I=>!T.includes(I))){if(!f.link)continue;const I=O.tz(O.tz.guess()),D=f.startTime.diff(I,"minutes");if(D>=-10&&D<=c&&(T.push(f),T.length>=u&&c>30))break}if(T.length>=u||c>1440)break;c+=15}return T}async function y(){t(2,E=!0);try{const T=await(await ce("https://bmlt.virtual-na.org/main_server/client_interface/jsonp/?switcher=GetSearchResults&data_field_key=weekday_tinyint,start_time,time_zone,meeting_name,comments,location_info")).json(),c=r(T);t(1,a=d(c)),n=[],w(),t(2,E=!1)}catch(m){console.log("parsing failed",m)}}function w(){if(O().diff(k,"seconds")>900){y(),k=O();return}a.length?n.length==a.length&&(n.length>1?n=[n.pop()]:n=[]):t(0,s=null);const m=a.filter(u=>!n.includes(u));t(0,s=m[Math.floor(Math.random()*m.length)]),n.push(s),t(3,g=!1)}function M(m){t(3,g=!0),navigator.clipboard.writeText(m)}return[s,a,E,g,w,M,()=>M(s.link)]}class Ie extends te{constructor(e){super();se(this,e,we,ye,ae,{})}}function Te(p){let e,t,s,a,n,E,k,g,v;return g=new Ie({}),{c(){e=h("link"),t=h("link"),s=h("meta"),a=h("meta"),n=h("script"),k=U(),fe(g.$$.fragment),this.h()},l(r){const d=ue('[data-svelte="svelte-1ouqje7"]',document.head);e=_(d,"LINK",{rel:!0,href:!0}),t=_(d,"LINK",{rel:!0,href:!0}),s=_(d,"META",{name:!0,content:!0}),a=_(d,"META",{name:!0,content:!0}),n=_(d,"SCRIPT",{src:!0,"data-auto-a11y":!0});var y=b(n);y.forEach(l),d.forEach(l),k=q(r),de(g.$$.fragment,r),this.h()},h(){o(e,"rel","manifest"),o(e,"href","manifest.json"),o(t,"rel","apple-touch-icon"),o(t,"href","apple-icon-180.png"),o(s,"name","mobile-web-app-capable"),o(s,"content","yes"),o(a,"name","apple-mobile-web-app-capable"),o(a,"content","yes"),document.title="Random Virtual Meeting",me(n.src,E="https://use.fontawesome.com/releases/v5.15.4/js/all.js")||o(n,"src",E),o(n,"data-auto-a11y","true")},m(r,d){i(document.head,e),i(document.head,t),i(document.head,s),i(document.head,a),i(document.head,n),j(r,k,d),he(g,r,d),v=!0},p:W,i(r){v||(_e(g.$$.fragment,r),v=!0)},o(r){pe(g.$$.fragment,r),v=!1},d(r){l(e),l(t),l(s),l(a),l(n),r&&l(k),ve(g,r)}}}class Ae extends te{constructor(e){super();se(this,e,null,Te,ae,{})}}export{Ae as default};
