import{S as ee,i as te,s as se,e as c,t as L,k as G,c as f,a as h,g as z,d as a,n as H,b as o,J as ae,f as U,H as l,K as ne,I as Z,L as K,A as ie,M as re,h as Y,j as oe,N as ce,m as fe,O as ue,o as de,x as me,u as he,v as _e}from"../chunks/vendor-06f73bce.js";function pe(_){let e;return{c(){e=L("No meetings found for the next 24 hours.")},l(t){e=z(t,"No meetings found for the next 24 hours.")},m(t,s){U(t,e,s)},p:Z,d(t){t&&a(e)}}}function ve(_){let e,t=_[0].name+"",s,n,i,T,b=_[0].startTime.format("dddd")+"",g,k,v=_[0].startTime.format("h:mma")+"",E,D,A,N,R=_[0].link+"",u,d,y,p,S,M,q,B,O,I,V,m=_[0].info&&le(_);function F(r,w){return r[3]?be:ge}let C=F(_),j=C(_);return{c(){e=c("h4"),s=L(t),n=G(),i=c("ul"),T=c("li"),g=L(b),k=L(" at "),E=L(v),D=G(),A=c("li"),N=c("a"),u=L(R),y=G(),m&&m.c(),p=G(),S=c("div"),M=c("button"),j.c(),q=G(),B=c("span"),O=L("Copy Link"),this.h()},l(r){e=f(r,"H4",{});var w=h(e);s=z(w,t),w.forEach(a),n=H(r),i=f(r,"UL",{});var P=h(i);T=f(P,"LI",{});var J=h(T);g=z(J,b),k=z(J," at "),E=z(J,v),J.forEach(a),D=H(P),A=f(P,"LI",{class:!0});var Q=h(A);N=f(Q,"A",{href:!0,target:!0});var W=h(N);u=z(W,R),W.forEach(a),Q.forEach(a),y=H(P),m&&m.l(P),P.forEach(a),p=H(r),S=f(r,"DIV",{class:!0});var X=h(S);M=f(X,"BUTTON",{class:!0});var $=h(M);j.l($),q=H($),B=f($,"SPAN",{});var x=h(B);O=z(x,"Copy Link"),x.forEach(a),$.forEach(a),X.forEach(a),this.h()},h(){o(N,"href",d=_[0].link),o(N,"target","_blank"),o(A,"class","meeting-link svelte-14s9879"),o(M,"class","button is-small is-dark copy-button svelte-14s9879"),o(S,"class","has-text-centered")},m(r,w){U(r,e,w),l(e,s),U(r,n,w),U(r,i,w),l(i,T),l(T,g),l(T,k),l(T,E),l(i,D),l(i,A),l(A,N),l(N,u),l(i,y),m&&m.m(i,null),U(r,p,w),U(r,S,w),l(S,M),j.m(M,null),l(M,q),l(M,B),l(B,O),I||(V=ne(M,"click",_[6]),I=!0)},p(r,w){w&1&&t!==(t=r[0].name+"")&&Y(s,t),w&1&&b!==(b=r[0].startTime.format("dddd")+"")&&Y(g,b),w&1&&v!==(v=r[0].startTime.format("h:mma")+"")&&Y(E,v),w&1&&R!==(R=r[0].link+"")&&Y(u,R),w&1&&d!==(d=r[0].link)&&o(N,"href",d),r[0].info?m?m.p(r,w):(m=le(r),m.c(),m.m(i,null)):m&&(m.d(1),m=null),C!==(C=F(r))&&(j.d(1),j=C(r),j&&(j.c(),j.m(M,q)))},d(r){r&&a(e),r&&a(n),r&&a(i),m&&m.d(),r&&a(p),r&&a(S),j.d(),I=!1,V()}}}function le(_){let e,t=_[0].info+"",s;return{c(){e=c("li"),s=L(t)},l(n){e=f(n,"LI",{});var i=h(e);s=z(i,t),i.forEach(a)},m(n,i){U(n,e,i),l(e,s)},p(n,i){i&1&&t!==(t=n[0].info+"")&&Y(s,t)},d(n){n&&a(e)}}}function ge(_){let e,t;return{c(){e=c("span"),t=c("i"),this.h()},l(s){e=f(s,"SPAN",{class:!0});var n=h(e);t=f(n,"I",{class:!0}),h(t).forEach(a),n.forEach(a),this.h()},h(){o(t,"class","far fa-copy"),o(e,"class","icon is-small")},m(s,n){U(s,e,n),l(e,t)},d(s){s&&a(e)}}}function be(_){let e,t;return{c(){e=c("span"),t=c("i"),this.h()},l(s){e=f(s,"SPAN",{class:!0});var n=h(e);t=f(n,"I",{class:!0}),h(t).forEach(a),n.forEach(a),this.h()},h(){o(t,"class","fas fa-copy"),o(e,"class","icon is-small")},m(s,n){U(s,e,n),l(e,t)},d(s){s&&a(e)}}}function ke(_){let e,t,s,n,i,T,b,g,k,v,E,D,A,N,R,u,d,y,p,S,M,q;function B(V,m){if(V[0])return ve;if(V[1]!==void 0)return pe}let O=B(_),I=O&&O(_);return{c(){e=c("section"),t=c("div"),s=c("div"),n=c("h4"),i=L("Random Virtual Meeting"),T=G(),b=c("div"),g=c("div"),k=c("button"),v=L("Get A Random Meeting"),E=G(),D=c("div"),A=c("div"),I&&I.c(),N=G(),R=c("div"),u=c("a"),d=L("Ideas?"),y=L(`
                \u2022 Data from
                `),p=c("a"),S=L("virtual-na.org"),this.h()},l(V){e=f(V,"SECTION",{class:!0});var m=h(e);t=f(m,"DIV",{class:!0});var F=h(t);s=f(F,"DIV",{class:!0});var C=h(s);n=f(C,"H4",{class:!0});var j=h(n);i=z(j,"Random Virtual Meeting"),j.forEach(a),T=H(C),b=f(C,"DIV",{class:!0});var r=h(b);g=f(r,"DIV",{class:!0});var w=h(g);k=f(w,"BUTTON",{class:!0});var P=h(k);v=z(P,"Get A Random Meeting"),P.forEach(a),w.forEach(a),E=H(r),D=f(r,"DIV",{class:!0});var J=h(D);A=f(J,"DIV",{class:!0});var Q=h(A);I&&I.l(Q),Q.forEach(a),J.forEach(a),r.forEach(a),N=H(C),R=f(C,"DIV",{class:!0});var W=h(R);u=f(W,"A",{href:!0,target:!0});var X=h(u);d=z(X,"Ideas?"),X.forEach(a),y=z(W,`
                \u2022 Data from
                `),p=f(W,"A",{href:!0,target:!0});var $=h(p);S=z($,"virtual-na.org"),$.forEach(a),W.forEach(a),C.forEach(a),F.forEach(a),m.forEach(a),this.h()},h(){o(n,"class","title is-4 has-text-centered"),o(k,"class","button is-fullwidth svelte-14s9879"),k.disabled=_[2],ae(k,"is-loading",_[2]),o(g,"class","block"),o(A,"class","content"),o(D,"class","block is-shadowless p-2"),o(b,"class","block"),o(u,"href","https://github.com/bmlt-enabled/randomvm/issues"),o(u,"target","_blank"),o(p,"href","https://virtual-na.org/meetings"),o(p,"target","_blank"),o(R,"class","box is-shadowless p-3 m-0 has-text-centered"),o(s,"class","card p-5"),o(t,"class","randomvm container svelte-14s9879"),o(e,"class","section p-5")},m(V,m){U(V,e,m),l(e,t),l(t,s),l(s,n),l(n,i),l(s,T),l(s,b),l(b,g),l(g,k),l(k,v),l(b,E),l(b,D),l(D,A),I&&I.m(A,null),l(s,N),l(s,R),l(R,u),l(u,d),l(R,y),l(R,p),l(p,S),M||(q=ne(k,"click",_[4]),M=!0)},p(V,[m]){m&4&&(k.disabled=V[2]),m&4&&ae(k,"is-loading",V[2]),O===(O=B(V))&&I?I.p(V,m):(I&&I.d(1),I=O&&O(V),I&&(I.c(),I.m(A,null)))},i:Z,o:Z,d(V){V&&a(e),I&&I.d(),M=!1,q()}}}function Ee(_,e,t){let s,n,i=[],T=!1,b=K(),g=!1;class k{constructor(d){this.name=d.meeting_name,this.startTime=this.getAdjustedStartTime(d),this.link=d.comments,this.info=d.location_info}getAdjustedStartTime(d){const y=parseInt(d.weekday_tinyint)===1?7:parseInt(d.weekday_tinyint)-1;let p=K().tz(d.time_zone||"UTC",!0).set({hour:parseInt(d.start_time.split(":")[0]),minute:parseInt(d.start_time.split(":")[1]),second:0}).isoWeekday(y);return p=p.clone().tz(K.tz.guess()),K.tz(K.tz.guess())>p&&p.add(1,"weeks"),p}}ie(()=>{D()});function v(u){const d=[];if(u)for(const y of u)d.push(new k(y));return d}function E(u){const d=u.length<3?u.length:3,y=[];let p=30;for(;u.length>y.length;){for(const S of u.filter(M=>!y.includes(M))){if(!S.link)continue;const M=K.tz(K.tz.guess()),q=S.startTime.diff(M,"minutes");if(q>=-10&&q<=p&&(y.push(S),y.length>=d&&p>30))break}if(y.length>=d||p>1440)break;p+=15}return y}async function D(){t(2,T=!0);try{const y=await(await re("https://bmlt.virtual-na.org/main_server/client_interface/jsonp/?switcher=GetSearchResults&data_field_key=weekday_tinyint,start_time,time_zone,meeting_name,comments,location_info")).json(),p=v(y);t(1,n=E(p)),i=[],A(),t(2,T=!1)}catch(u){console.log("parsing failed",u)}}function A(){if(K().diff(b,"seconds")>900){D(),b=K();return}n.length?i.length==n.length&&(i.length>1?i=[i.pop()]:i=[]):t(0,s=null);const u=n.filter(d=>!i.includes(d));t(0,s=u[Math.floor(Math.random()*u.length)]),i.push(s),t(3,g=!1)}function N(u){t(3,g=!0),navigator.clipboard.writeText(u)}return[s,n,T,g,A,N,()=>N(s.link)]}class ye extends ee{constructor(e){super();te(this,e,Ee,ke,se,{})}}function Ie(_){let e,t,s,n,i,T,b,g,k;return g=new ye({}),{c(){e=c("link"),t=c("link"),s=c("meta"),n=c("meta"),i=c("script"),b=G(),oe(g.$$.fragment),this.h()},l(v){const E=ce('[data-svelte="svelte-1ouqje7"]',document.head);e=f(E,"LINK",{rel:!0,href:!0}),t=f(E,"LINK",{rel:!0,href:!0}),s=f(E,"META",{name:!0,content:!0}),n=f(E,"META",{name:!0,content:!0}),i=f(E,"SCRIPT",{src:!0,"data-auto-a11y":!0});var D=h(i);D.forEach(a),E.forEach(a),b=H(v),fe(g.$$.fragment,v),this.h()},h(){o(e,"rel","manifest"),o(e,"href","manifest.json"),o(t,"rel","apple-touch-icon"),o(t,"href","apple-icon-180.png"),o(s,"name","mobile-web-app-capable"),o(s,"content","yes"),o(n,"name","apple-mobile-web-app-capable"),o(n,"content","yes"),document.title="Random Virtual Meeting",ue(i.src,T="https://use.fontawesome.com/releases/v5.15.4/js/all.js")||o(i,"src",T),o(i,"data-auto-a11y","true")},m(v,E){l(document.head,e),l(document.head,t),l(document.head,s),l(document.head,n),l(document.head,i),U(v,b,E),de(g,v,E),k=!0},p:Z,i(v){k||(me(g.$$.fragment,v),k=!0)},o(v){he(g.$$.fragment,v),k=!1},d(v){a(e),a(t),a(s),a(n),a(i),v&&a(b),_e(g,v)}}}class Te extends ee{constructor(e){super();te(this,e,null,Ie,se,{})}}export{Te as default};
