import{S as ae,i as ne,s as le,e as d,k as C,t as S,c as m,a as v,n as U,g as L,d as l,b as r,f as j,H as i,J as ie,K as re,I as $,L as q,A as fe,M as ue,h as B,j as de,N as me,m as he,O as _e,o as pe,x as ve,u as ge,v as be}from"../chunks/vendor-3da06047.js";function ke(h){let e;return{c(){e=S("No meetings found for the next 24 hours.")},l(t){e=L(t,"No meetings found for the next 24 hours.")},m(t,s){j(t,e,s)},p:$,d(t){t&&l(e)}}}function Ee(h){let e,t=h[0].name+"",s,a,n,I,k=h[0].startTime.format("dddd")+"",g,p,o=h[0].startTime.format("h:mma")+"",u,w,M,T,N=h[0].link+"",b,c,y,f=h[0].info&&oe(h);return{c(){e=d("h4"),s=S(t),a=C(),n=d("ul"),I=d("li"),g=S(k),p=S(" at "),u=S(o),w=C(),M=d("li"),T=d("a"),b=S(N),y=C(),f&&f.c(),this.h()},l(_){e=m(_,"H4",{});var E=v(e);s=L(E,t),E.forEach(l),a=U(_),n=m(_,"UL",{});var R=v(n);I=m(R,"LI",{});var O=v(I);g=L(O,k),p=L(O," at "),u=L(O,o),O.forEach(l),w=U(R),M=m(R,"LI",{class:!0});var H=v(M);T=m(H,"A",{href:!0,target:!0});var K=v(T);b=L(K,N),K.forEach(l),H.forEach(l),y=U(R),f&&f.l(R),R.forEach(l),this.h()},h(){r(T,"href",c=h[0].link),r(T,"target","_blank"),r(M,"class","meeting-link svelte-1bgs718")},m(_,E){j(_,e,E),i(e,s),j(_,a,E),j(_,n,E),i(n,I),i(I,g),i(I,p),i(I,u),i(n,w),i(n,M),i(M,T),i(T,b),i(n,y),f&&f.m(n,null)},p(_,E){E&1&&t!==(t=_[0].name+"")&&B(s,t),E&1&&k!==(k=_[0].startTime.format("dddd")+"")&&B(g,k),E&1&&o!==(o=_[0].startTime.format("h:mma")+"")&&B(u,o),E&1&&N!==(N=_[0].link+"")&&B(b,N),E&1&&c!==(c=_[0].link)&&r(T,"href",c),_[0].info?f?f.p(_,E):(f=oe(_),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},d(_){_&&l(e),_&&l(a),_&&l(n),f&&f.d()}}}function oe(h){let e,t=h[0].info+"",s;return{c(){e=d("li"),s=S(t)},l(a){e=m(a,"LI",{});var n=v(e);s=L(n,t),n.forEach(l)},m(a,n){j(a,e,n),i(e,s)},p(a,n){n&1&&t!==(t=a[0].info+"")&&B(s,t)},d(a){a&&l(e)}}}function ce(h){let e,t,s,a,n,I,k;function g(u,w){return u[3]?Ie:ye}let p=g(h),o=p(h);return{c(){e=d("div"),t=d("button"),o.c(),s=C(),a=d("span"),n=S("Copy Link"),this.h()},l(u){e=m(u,"DIV",{class:!0});var w=v(e);t=m(w,"BUTTON",{class:!0});var M=v(t);o.l(M),s=U(M),a=m(M,"SPAN",{});var T=v(a);n=L(T,"Copy Link"),T.forEach(l),M.forEach(l),w.forEach(l),this.h()},h(){r(t,"class","button is-small copy-button svelte-1bgs718"),r(e,"class","block has-text-centered")},m(u,w){j(u,e,w),i(e,t),o.m(t,null),i(t,s),i(t,a),i(a,n),I||(k=ie(t,"click",h[6]),I=!0)},p(u,w){p!==(p=g(u))&&(o.d(1),o=p(u),o&&(o.c(),o.m(t,s)))},d(u){u&&l(e),o.d(),I=!1,k()}}}function ye(h){let e,t;return{c(){e=d("span"),t=d("i"),this.h()},l(s){e=m(s,"SPAN",{class:!0});var a=v(e);t=m(a,"I",{class:!0}),v(t).forEach(l),a.forEach(l),this.h()},h(){r(t,"class","far fa-copy"),r(e,"class","icon is-small")},m(s,a){j(s,e,a),i(e,t)},d(s){s&&l(e)}}}function Ie(h){let e,t;return{c(){e=d("span"),t=d("i"),this.h()},l(s){e=m(s,"SPAN",{class:!0});var a=v(e);t=m(a,"I",{class:!0}),v(t).forEach(l),a.forEach(l),this.h()},h(){r(t,"class","fas fa-copy"),r(e,"class","icon is-small")},m(s,a){j(s,e,a),i(e,t)},d(s){s&&l(e)}}}function we(h){let e,t,s,a,n,I,k,g,p,o,u,w,M,T,N,b,c,y,f,_,E,R,O,H;function K(V,z){if(V[0])return Ee;if(V[1]!==void 0)return ke}let G=K(h),A=G&&G(h),D=h[0]&&ce(h);return{c(){e=d("section"),t=d("div"),s=d("div"),a=d("h4"),n=S("Random Virtual Meeting"),I=C(),k=d("div"),g=d("div"),p=d("button"),o=S("Get A Random Meeting"),u=C(),w=d("div"),M=d("div"),T=d("div"),A&&A.c(),N=C(),D&&D.c(),b=C(),c=d("div"),y=d("a"),f=S("Ideas?"),_=S(`
                \u2022 Data from
                `),E=d("a"),R=S("virtual-na.org"),this.h()},l(V){e=m(V,"SECTION",{class:!0});var z=v(e);t=m(z,"DIV",{class:!0});var F=v(t);s=m(F,"DIV",{class:!0});var P=v(s);a=m(P,"H4",{class:!0});var Q=v(a);n=L(Q,"Random Virtual Meeting"),Q.forEach(l),I=U(P),k=m(P,"DIV",{class:!0});var J=v(k);g=m(J,"DIV",{class:!0});var X=v(g);p=m(X,"BUTTON",{class:!0});var Y=v(p);o=L(Y,"Get A Random Meeting"),Y.forEach(l),X.forEach(l),u=U(J),w=m(J,"DIV",{class:!0});var Z=v(w);M=m(Z,"DIV",{class:!0});var x=v(M);T=m(x,"DIV",{class:!0});var ee=v(T);A&&A.l(ee),ee.forEach(l),x.forEach(l),Z.forEach(l),J.forEach(l),N=U(P),D&&D.l(P),b=U(P),c=m(P,"DIV",{class:!0});var W=v(c);y=m(W,"A",{href:!0,target:!0});var te=v(y);f=L(te,"Ideas?"),te.forEach(l),_=L(W,`
                \u2022 Data from
                `),E=m(W,"A",{href:!0,target:!0});var se=v(E);R=L(se,"virtual-na.org"),se.forEach(l),W.forEach(l),P.forEach(l),F.forEach(l),z.forEach(l),this.h()},h(){r(a,"class","title is-4 has-text-centered"),r(p,"class","button is-fullwidth svelte-1bgs718"),p.disabled=h[2],re(p,"is-loading",h[2]),r(g,"class","block"),r(T,"class","content p-2"),r(M,"class","column is-half"),r(w,"class","columns is-mobile is-centered"),r(k,"class","block"),r(y,"href","https://github.com/bmlt-enabled/randomvm/issues"),r(y,"target","_blank"),r(E,"href","https://virtual-na.org/meetings"),r(E,"target","_blank"),r(c,"class","box is-shadowless p-3 m-0 has-text-centered"),r(s,"class","card p-5"),r(t,"class","container"),r(e,"class","section p-5")},m(V,z){j(V,e,z),i(e,t),i(t,s),i(s,a),i(a,n),i(s,I),i(s,k),i(k,g),i(g,p),i(p,o),i(k,u),i(k,w),i(w,M),i(M,T),A&&A.m(T,null),i(s,N),D&&D.m(s,null),i(s,b),i(s,c),i(c,y),i(y,f),i(c,_),i(c,E),i(E,R),O||(H=ie(p,"click",h[4]),O=!0)},p(V,[z]){z&4&&(p.disabled=V[2]),z&4&&re(p,"is-loading",V[2]),G===(G=K(V))&&A?A.p(V,z):(A&&A.d(1),A=G&&G(V),A&&(A.c(),A.m(T,null))),V[0]?D?D.p(V,z):(D=ce(V),D.c(),D.m(s,b)):D&&(D.d(1),D=null)},i:$,o:$,d(V){V&&l(e),A&&A.d(),D&&D.d(),O=!1,H()}}}function Te(h){let e;try{e=new URL(h)}catch(t){return!1}return e.protocol==="http:"||e.protocol==="https:"}function Me(h,e,t){let s,a,n=[],I=!1,k=q(),g=!1;class p{constructor(c){this.name=c.meeting_name,this.startTime=this.getAdjustedStartTime(c),this.link=c.comments,this.info=c.location_info}getAdjustedStartTime(c){const y=parseInt(c.weekday_tinyint)===1?7:parseInt(c.weekday_tinyint)-1;let f=q().tz(c.time_zone||"UTC",!0).set({hour:parseInt(c.start_time.split(":")[0]),minute:parseInt(c.start_time.split(":")[1]),second:0}).isoWeekday(y);return f=f.clone().tz(q.tz.guess()),q.tz(q.tz.guess())>f&&f.add(1,"weeks"),f}}fe(()=>{w()});function o(b){const c=[];if(b)for(const y of b)c.push(new p(y));return c}function u(b){const c=b.length<3?b.length:3,y=[];let f=30;for(;b.length>y.length;){for(const _ of b.filter(E=>!y.includes(E))){if(!Te(_.link))continue;const E=q.tz(q.tz.guess()),R=_.startTime.diff(E,"minutes");if(R>=-10&&R<=f&&(y.push(_),y.length>=c&&f>30))break}if(y.length>=c||f>1440)break;f+=15}return y}async function w(){t(2,I=!0);try{const y=await(await ue("https://bmlt.virtual-na.org/main_server/client_interface/jsonp/?switcher=GetSearchResults&data_field_key=weekday_tinyint,start_time,time_zone,meeting_name,comments,location_info")).json(),f=o(y);t(1,a=u(f)),n=[],M(),t(2,I=!1)}catch(b){console.log("parsing failed",b)}}function M(){if(q().diff(k,"seconds")>900){w(),k=q();return}a.length?n.length==a.length&&(n.length>1?n=[n.pop()]:n=[]):t(0,s=null);const b=a.filter(c=>!n.includes(c));t(0,s=b[Math.floor(Math.random()*b.length)]),n.push(s),t(3,g=!1)}function T(b){t(3,g=!0),navigator.clipboard.writeText(b)}return[s,a,I,g,M,T,()=>T(s.link)]}class Ve extends ae{constructor(e){super();ne(this,e,Me,we,le,{})}}function Ae(h){let e,t,s,a,n,I,k,g,p;return g=new Ve({}),{c(){e=d("link"),t=d("link"),s=d("meta"),a=d("meta"),n=d("script"),k=C(),de(g.$$.fragment),this.h()},l(o){const u=me('[data-svelte="svelte-1ouqje7"]',document.head);e=m(u,"LINK",{rel:!0,href:!0}),t=m(u,"LINK",{rel:!0,href:!0}),s=m(u,"META",{name:!0,content:!0}),a=m(u,"META",{name:!0,content:!0}),n=m(u,"SCRIPT",{src:!0,"data-auto-a11y":!0});var w=v(n);w.forEach(l),u.forEach(l),k=U(o),he(g.$$.fragment,o),this.h()},h(){r(e,"rel","manifest"),r(e,"href","manifest.json"),r(t,"rel","apple-touch-icon"),r(t,"href","apple-icon-180.png"),r(s,"name","mobile-web-app-capable"),r(s,"content","yes"),r(a,"name","apple-mobile-web-app-capable"),r(a,"content","yes"),document.title="Random Virtual Meeting",_e(n.src,I="https://use.fontawesome.com/releases/v5.15.4/js/all.js")||r(n,"src",I),r(n,"data-auto-a11y","true")},m(o,u){i(document.head,e),i(document.head,t),i(document.head,s),i(document.head,a),i(document.head,n),j(o,k,u),pe(g,o,u),p=!0},p:$,i(o){p||(ve(g.$$.fragment,o),p=!0)},o(o){ge(g.$$.fragment,o),p=!1},d(o){l(e),l(t),l(s),l(a),l(n),o&&l(k),be(g,o)}}}class Re extends ae{constructor(e){super();ne(this,e,null,Ae,le,{})}}export{Re as default};
