import{S as te,i as se,s as ae,e as h,k as U,t as N,c as _,a as b,n as q,g as R,d as l,b as o,f as j,H as i,J as ne,K as le,I as W,L as O,A as oe,M as ce,h as B,j as fe,N as ue,m as de,O as me,o as he,x as _e,u as pe,v as ve}from"../chunks/vendor-3da06047.js";function ge(p){let e;return{c(){e=N("No meetings found for the next 24 hours.")},l(t){e=R(t,"No meetings found for the next 24 hours.")},m(t,s){j(t,e,s)},p:W,d(t){t&&l(e)}}}function ke(p){let e,t=p[0].name+"",s,a,n,E,v=p[0].startTime.format("dddd")+"",k,g,r=p[0].startTime.format("h:mma")+"",d,y,I,M,L=p[0].link+"",m,u,T,c=p[0].info&&ie(p);return{c(){e=h("h4"),s=N(t),a=U(),n=h("ul"),E=h("li"),k=N(v),g=N(" at "),d=N(r),y=U(),I=h("li"),M=h("a"),m=N(L),T=U(),c&&c.c(),this.h()},l(f){e=_(f,"H4",{});var w=b(e);s=R(w,t),w.forEach(l),a=q(f),n=_(f,"UL",{});var D=b(n);E=_(D,"LI",{});var P=b(E);k=R(P,v),g=R(P," at "),d=R(P,r),P.forEach(l),y=q(D),I=_(D,"LI",{class:!0});var K=b(I);M=_(K,"A",{href:!0,target:!0});var C=b(M);m=R(C,L),C.forEach(l),K.forEach(l),T=q(D),c&&c.l(D),D.forEach(l),this.h()},h(){o(M,"href",u=p[0].link),o(M,"target","_blank"),o(I,"class","meeting-link svelte-14s9879")},m(f,w){j(f,e,w),i(e,s),j(f,a,w),j(f,n,w),i(n,E),i(E,k),i(E,g),i(E,d),i(n,y),i(n,I),i(I,M),i(M,m),i(n,T),c&&c.m(n,null)},p(f,w){w&1&&t!==(t=f[0].name+"")&&B(s,t),w&1&&v!==(v=f[0].startTime.format("dddd")+"")&&B(k,v),w&1&&r!==(r=f[0].startTime.format("h:mma")+"")&&B(d,r),w&1&&L!==(L=f[0].link+"")&&B(m,L),w&1&&u!==(u=f[0].link)&&o(M,"href",u),f[0].info?c?c.p(f,w):(c=ie(f),c.c(),c.m(n,null)):c&&(c.d(1),c=null)},d(f){f&&l(e),f&&l(a),f&&l(n),c&&c.d()}}}function ie(p){let e,t=p[0].info+"",s;return{c(){e=h("li"),s=N(t)},l(a){e=_(a,"LI",{});var n=b(e);s=R(n,t),n.forEach(l)},m(a,n){j(a,e,n),i(e,s)},p(a,n){n&1&&t!==(t=a[0].info+"")&&B(s,t)},d(a){a&&l(e)}}}function re(p){let e,t,s,a,n,E,v;function k(d,y){return d[3]?Ee:be}let g=k(p),r=g(p);return{c(){e=h("div"),t=h("button"),r.c(),s=U(),a=h("span"),n=N("Copy Link"),this.h()},l(d){e=_(d,"DIV",{class:!0});var y=b(e);t=_(y,"BUTTON",{class:!0});var I=b(t);r.l(I),s=q(I),a=_(I,"SPAN",{});var M=b(a);n=R(M,"Copy Link"),M.forEach(l),I.forEach(l),y.forEach(l),this.h()},h(){o(t,"class","button is-small is-dark copy-button svelte-14s9879"),o(e,"class","block has-text-centered")},m(d,y){j(d,e,y),i(e,t),r.m(t,null),i(t,s),i(t,a),i(a,n),E||(v=ne(t,"click",p[6]),E=!0)},p(d,y){g!==(g=k(d))&&(r.d(1),r=g(d),r&&(r.c(),r.m(t,s)))},d(d){d&&l(e),r.d(),E=!1,v()}}}function be(p){let e,t;return{c(){e=h("span"),t=h("i"),this.h()},l(s){e=_(s,"SPAN",{class:!0});var a=b(e);t=_(a,"I",{class:!0}),b(t).forEach(l),a.forEach(l),this.h()},h(){o(t,"class","far fa-copy"),o(e,"class","icon is-small")},m(s,a){j(s,e,a),i(e,t)},d(s){s&&l(e)}}}function Ee(p){let e,t;return{c(){e=h("span"),t=h("i"),this.h()},l(s){e=_(s,"SPAN",{class:!0});var a=b(e);t=_(a,"I",{class:!0}),b(t).forEach(l),a.forEach(l),this.h()},h(){o(t,"class","fas fa-copy"),o(e,"class","icon is-small")},m(s,a){j(s,e,a),i(e,t)},d(s){s&&l(e)}}}function ye(p){let e,t,s,a,n,E,v,k,g,r,d,y,I,M,L,m,u,T,c,f,w,D,P;function K(A,z){if(A[0])return ke;if(A[1]!==void 0)return ge}let C=K(p),V=C&&C(p),S=p[0]&&re(p);return{c(){e=h("section"),t=h("div"),s=h("div"),a=h("h4"),n=N("Random Virtual Meeting"),E=U(),v=h("div"),k=h("div"),g=h("button"),r=N("Get A Random Meeting"),d=U(),y=h("div"),I=h("div"),V&&V.c(),M=U(),S&&S.c(),L=U(),m=h("div"),u=h("a"),T=N("Ideas?"),c=N(`
                \u2022 Data from
                `),f=h("a"),w=N("virtual-na.org"),this.h()},l(A){e=_(A,"SECTION",{class:!0});var z=b(e);t=_(z,"DIV",{class:!0});var $=b(t);s=_($,"DIV",{class:!0});var G=b(s);a=_(G,"H4",{class:!0});var F=b(a);n=R(F,"Random Virtual Meeting"),F.forEach(l),E=q(G),v=_(G,"DIV",{class:!0});var H=b(v);k=_(H,"DIV",{class:!0});var Q=b(k);g=_(Q,"BUTTON",{class:!0});var X=b(g);r=R(X,"Get A Random Meeting"),X.forEach(l),Q.forEach(l),d=q(H),y=_(H,"DIV",{class:!0});var Y=b(y);I=_(Y,"DIV",{class:!0});var Z=b(I);V&&V.l(Z),Z.forEach(l),Y.forEach(l),M=q(H),S&&S.l(H),H.forEach(l),L=q(G),m=_(G,"DIV",{class:!0});var J=b(m);u=_(J,"A",{href:!0,target:!0});var x=b(u);T=R(x,"Ideas?"),x.forEach(l),c=R(J,`
                \u2022 Data from
                `),f=_(J,"A",{href:!0,target:!0});var ee=b(f);w=R(ee,"virtual-na.org"),ee.forEach(l),J.forEach(l),G.forEach(l),$.forEach(l),z.forEach(l),this.h()},h(){o(a,"class","title is-4 has-text-centered"),o(g,"class","button is-fullwidth svelte-14s9879"),g.disabled=p[2],le(g,"is-loading",p[2]),o(k,"class","block"),o(I,"class","content"),o(y,"class","block is-shadowless p-2"),o(v,"class","block"),o(u,"href","https://github.com/bmlt-enabled/randomvm/issues"),o(u,"target","_blank"),o(f,"href","https://virtual-na.org/meetings"),o(f,"target","_blank"),o(m,"class","box is-shadowless p-3 m-0 has-text-centered"),o(s,"class","card p-5"),o(t,"class","randomvm container svelte-14s9879"),o(e,"class","section p-5")},m(A,z){j(A,e,z),i(e,t),i(t,s),i(s,a),i(a,n),i(s,E),i(s,v),i(v,k),i(k,g),i(g,r),i(v,d),i(v,y),i(y,I),V&&V.m(I,null),i(v,M),S&&S.m(v,null),i(s,L),i(s,m),i(m,u),i(u,T),i(m,c),i(m,f),i(f,w),D||(P=ne(g,"click",p[4]),D=!0)},p(A,[z]){z&4&&(g.disabled=A[2]),z&4&&le(g,"is-loading",A[2]),C===(C=K(A))&&V?V.p(A,z):(V&&V.d(1),V=C&&C(A),V&&(V.c(),V.m(I,null))),A[0]?S?S.p(A,z):(S=re(A),S.c(),S.m(v,null)):S&&(S.d(1),S=null)},i:W,o:W,d(A){A&&l(e),V&&V.d(),S&&S.d(),D=!1,P()}}}function Ie(p,e,t){let s,a,n=[],E=!1,v=O(),k=!1;class g{constructor(u){this.name=u.meeting_name,this.startTime=this.getAdjustedStartTime(u),this.link=u.comments,this.info=u.location_info}getAdjustedStartTime(u){const T=parseInt(u.weekday_tinyint)===1?7:parseInt(u.weekday_tinyint)-1;let c=O().tz(u.time_zone||"UTC",!0).set({hour:parseInt(u.start_time.split(":")[0]),minute:parseInt(u.start_time.split(":")[1]),second:0}).isoWeekday(T);return c=c.clone().tz(O.tz.guess()),O.tz(O.tz.guess())>c&&c.add(1,"weeks"),c}}oe(()=>{y()});function r(m){const u=[];if(m)for(const T of m)u.push(new g(T));return u}function d(m){const u=m.length<3?m.length:3,T=[];let c=30;for(;m.length>T.length;){for(const f of m.filter(w=>!T.includes(w))){if(!f.link)continue;const w=O.tz(O.tz.guess()),D=f.startTime.diff(w,"minutes");if(D>=-10&&D<=c&&(T.push(f),T.length>=u&&c>30))break}if(T.length>=u||c>1440)break;c+=15}return T}async function y(){t(2,E=!0);try{const T=await(await ce("https://bmlt.virtual-na.org/main_server/client_interface/jsonp/?switcher=GetSearchResults&data_field_key=weekday_tinyint,start_time,time_zone,meeting_name,comments,location_info")).json(),c=r(T);t(1,a=d(c)),n=[],I(),t(2,E=!1)}catch(m){console.log("parsing failed",m)}}function I(){if(O().diff(v,"seconds")>900){y(),v=O();return}a.length?n.length==a.length&&(n.length>1?n=[n.pop()]:n=[]):t(0,s=null);const m=a.filter(u=>!n.includes(u));t(0,s=m[Math.floor(Math.random()*m.length)]),n.push(s),t(3,k=!1)}function M(m){t(3,k=!0),navigator.clipboard.writeText(m)}return[s,a,E,k,I,M,()=>M(s.link)]}class we extends te{constructor(e){super();se(this,e,Ie,ye,ae,{})}}function Te(p){let e,t,s,a,n,E,v,k,g;return k=new we({}),{c(){e=h("link"),t=h("link"),s=h("meta"),a=h("meta"),n=h("script"),v=U(),fe(k.$$.fragment),this.h()},l(r){const d=ue('[data-svelte="svelte-1ouqje7"]',document.head);e=_(d,"LINK",{rel:!0,href:!0}),t=_(d,"LINK",{rel:!0,href:!0}),s=_(d,"META",{name:!0,content:!0}),a=_(d,"META",{name:!0,content:!0}),n=_(d,"SCRIPT",{src:!0,"data-auto-a11y":!0});var y=b(n);y.forEach(l),d.forEach(l),v=q(r),de(k.$$.fragment,r),this.h()},h(){o(e,"rel","manifest"),o(e,"href","manifest.json"),o(t,"rel","apple-touch-icon"),o(t,"href","apple-icon-180.png"),o(s,"name","mobile-web-app-capable"),o(s,"content","yes"),o(a,"name","apple-mobile-web-app-capable"),o(a,"content","yes"),document.title="Random Virtual Meeting",me(n.src,E="https://use.fontawesome.com/releases/v5.15.4/js/all.js")||o(n,"src",E),o(n,"data-auto-a11y","true")},m(r,d){i(document.head,e),i(document.head,t),i(document.head,s),i(document.head,a),i(document.head,n),j(r,v,d),he(k,r,d),g=!0},p:W,i(r){g||(_e(k.$$.fragment,r),g=!0)},o(r){pe(k.$$.fragment,r),g=!1},d(r){l(e),l(t),l(s),l(a),l(n),r&&l(v),ve(k,r)}}}class Ae extends te{constructor(e){super();se(this,e,null,Te,ae,{})}}export{Ae as default};
