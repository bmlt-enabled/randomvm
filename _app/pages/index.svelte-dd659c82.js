import{S as re,i as oe,s as ce,e as f,k as C,t as R,c as d,a as p,n as U,g as S,d as i,b as r,f as q,H as n,J as ue,K as fe,I as $,L as O,A as me,M as _e,h as J,j as pe,N as ve,m as ge,O as be,o as ke,x as Ee,u as ye,v as Ie}from"../chunks/vendor-b8317e2d.js";function we(m){let e;return{c(){e=R("No meetings found for the next 24 hours.")},l(t){e=S(t,"No meetings found for the next 24 hours.")},m(t,s){q(t,e,s)},p:$,d(t){t&&i(e)}}}function Te(m){let e,t=m[0].name+"",s,a,l,I,k=m[0].startTime.format("dddd")+"",g,v,c=m[0].startTime.format("h:mma")+"",h,w,M,T,N=m[0].link+"",b,o,y,u=m[0].info&&de(m);return{c(){e=f("h4"),s=R(t),a=C(),l=f("ul"),I=f("li"),g=R(k),v=R(" at "),h=R(c),w=C(),M=f("li"),T=f("a"),b=R(N),y=C(),u&&u.c(),this.h()},l(_){e=d(_,"H4",{});var E=p(e);s=S(E,t),E.forEach(i),a=U(_),l=d(_,"UL",{});var L=p(l);I=d(L,"LI",{});var P=p(I);g=S(P,k),v=S(P," at "),h=S(P,c),P.forEach(i),w=U(L),M=d(L,"LI",{class:!0});var z=p(M);T=d(z,"A",{href:!0,target:!0});var H=p(T);b=S(H,N),H.forEach(i),z.forEach(i),y=U(L),u&&u.l(L),L.forEach(i),this.h()},h(){r(T,"href",o=m[0].link),r(T,"target","_blank"),r(M,"class","meeting-link svelte-1bgs718")},m(_,E){q(_,e,E),n(e,s),q(_,a,E),q(_,l,E),n(l,I),n(I,g),n(I,v),n(I,h),n(l,w),n(l,M),n(M,T),n(T,b),n(l,y),u&&u.m(l,null)},p(_,E){E&1&&t!==(t=_[0].name+"")&&J(s,t),E&1&&k!==(k=_[0].startTime.format("dddd")+"")&&J(g,k),E&1&&c!==(c=_[0].startTime.format("h:mma")+"")&&J(h,c),E&1&&N!==(N=_[0].link+"")&&J(b,N),E&1&&o!==(o=_[0].link)&&r(T,"href",o),_[0].info?u?u.p(_,E):(u=de(_),u.c(),u.m(l,null)):u&&(u.d(1),u=null)},d(_){_&&i(e),_&&i(a),_&&i(l),u&&u.d()}}}function de(m){let e,t=m[0].info+"",s;return{c(){e=f("li"),s=R(t)},l(a){e=d(a,"LI",{});var l=p(e);s=S(l,t),l.forEach(i)},m(a,l){q(a,e,l),n(e,s)},p(a,l){l&1&&t!==(t=a[0].info+"")&&J(s,t)},d(a){a&&i(e)}}}function he(m){let e,t,s,a,l,I,k;function g(h,w){return h[3]?Ve:Me}let v=g(m),c=v(m);return{c(){e=f("div"),t=f("button"),c.c(),s=C(),a=f("span"),l=R("Copy Link"),this.h()},l(h){e=d(h,"DIV",{class:!0});var w=p(e);t=d(w,"BUTTON",{class:!0});var M=p(t);c.l(M),s=U(M),a=d(M,"SPAN",{});var T=p(a);l=S(T,"Copy Link"),T.forEach(i),M.forEach(i),w.forEach(i),this.h()},h(){r(t,"class","button is-small copy-button svelte-1bgs718"),r(e,"class","block has-text-centered")},m(h,w){q(h,e,w),n(e,t),c.m(t,null),n(t,s),n(t,a),n(a,l),I||(k=ue(t,"click",m[6]),I=!0)},p(h,w){v!==(v=g(h))&&(c.d(1),c=v(h),c&&(c.c(),c.m(t,s)))},d(h){h&&i(e),c.d(),I=!1,k()}}}function Me(m){let e,t;return{c(){e=f("span"),t=f("i"),this.h()},l(s){e=d(s,"SPAN",{class:!0});var a=p(e);t=d(a,"I",{class:!0}),p(t).forEach(i),a.forEach(i),this.h()},h(){r(t,"class","far fa-copy"),r(e,"class","icon is-small")},m(s,a){q(s,e,a),n(e,t)},d(s){s&&i(e)}}}function Ve(m){let e,t;return{c(){e=f("span"),t=f("i"),this.h()},l(s){e=d(s,"SPAN",{class:!0});var a=p(e);t=d(a,"I",{class:!0}),p(t).forEach(i),a.forEach(i),this.h()},h(){r(t,"class","fas fa-copy"),r(e,"class","icon is-small")},m(s,a){q(s,e,a),n(e,t)},d(s){s&&i(e)}}}function Ae(m){let e,t,s,a,l,I,k,g,v,c,h,w,M,T,N,b,o,y,u,_,E,L,P,z,H,F,Q;function X(V,j){if(V[0])return Te;if(V[1]!==void 0)return we}let K=X(m),A=K&&K(m),D=m[0]&&he(m);return{c(){e=f("section"),t=f("div"),s=f("div"),a=f("h4"),l=R("Random Virtual Meeting"),I=C(),k=f("div"),g=f("div"),v=f("button"),c=R("Get A Random Meeting"),h=C(),w=f("div"),M=f("div"),T=f("div"),A&&A.c(),N=C(),D&&D.c(),b=C(),o=f("div"),y=f("a"),u=R("Ideas?"),_=R(`
                \u2022 Data from
                `),E=f("a"),L=R("virtual-na.org"),P=C(),z=f("a"),H=R("virtual-na.org"),this.h()},l(V){e=d(V,"SECTION",{class:!0});var j=p(e);t=d(j,"DIV",{class:!0});var Y=p(t);s=d(Y,"DIV",{class:!0});var G=p(s);a=d(G,"H4",{class:!0});var Z=p(a);l=S(Z,"Random Virtual Meeting"),Z.forEach(i),I=U(G),k=d(G,"DIV",{class:!0});var W=p(k);g=d(W,"DIV",{class:!0});var x=p(g);v=d(x,"BUTTON",{class:!0});var ee=p(v);c=S(ee,"Get A Random Meeting"),ee.forEach(i),x.forEach(i),h=U(W),w=d(W,"DIV",{class:!0});var te=p(w);M=d(te,"DIV",{class:!0});var se=p(M);T=d(se,"DIV",{class:!0});var ae=p(T);A&&A.l(ae),ae.forEach(i),se.forEach(i),te.forEach(i),W.forEach(i),N=U(G),D&&D.l(G),b=U(G),o=d(G,"DIV",{class:!0});var B=p(o);y=d(B,"A",{href:!0,target:!0});var ne=p(y);u=S(ne,"Ideas?"),ne.forEach(i),_=S(B,`
                \u2022 Data from
                `),E=d(B,"A",{href:!0,target:!0});var le=p(E);L=S(le,"virtual-na.org"),le.forEach(i),P=U(B),z=d(B,"A",{href:!0,target:!0});var ie=p(z);H=S(ie,"virtual-na.org"),ie.forEach(i),B.forEach(i),G.forEach(i),Y.forEach(i),j.forEach(i),this.h()},h(){r(a,"class","title is-4 has-text-centered"),r(v,"class","button is-fullwidth svelte-1bgs718"),v.disabled=m[2],fe(v,"is-loading",m[2]),r(g,"class","block"),r(T,"class","content p-1"),r(M,"class","column is-half"),r(w,"class","columns is-centered"),r(k,"class","block"),r(y,"href","https://github.com/bmlt-enabled/randomvm/issues"),r(y,"target","_blank"),r(E,"href","https://virtual-na.org/meetings"),r(E,"target","_blank"),r(z,"href","https://virtual-na.org/meetings"),r(z,"target","_blank"),r(o,"class","box is-shadowless p-3 m-0 has-text-centered"),r(s,"class","card p-5"),r(t,"class","container is-max-desktop"),r(e,"class","section p-5")},m(V,j){q(V,e,j),n(e,t),n(t,s),n(s,a),n(a,l),n(s,I),n(s,k),n(k,g),n(g,v),n(v,c),n(k,h),n(k,w),n(w,M),n(M,T),A&&A.m(T,null),n(s,N),D&&D.m(s,null),n(s,b),n(s,o),n(o,y),n(y,u),n(o,_),n(o,E),n(E,L),n(o,P),n(o,z),n(z,H),F||(Q=ue(v,"click",m[4]),F=!0)},p(V,[j]){j&4&&(v.disabled=V[2]),j&4&&fe(v,"is-loading",V[2]),K===(K=X(V))&&A?A.p(V,j):(A&&A.d(1),A=K&&K(V),A&&(A.c(),A.m(T,null))),V[0]?D?D.p(V,j):(D=he(V),D.c(),D.m(s,b)):D&&(D.d(1),D=null)},i:$,o:$,d(V){V&&i(e),A&&A.d(),D&&D.d(),F=!1,Q()}}}function De(m){let e;try{e=new URL(m)}catch(t){return!1}return e.protocol==="http:"||e.protocol==="https:"}function Re(m,e,t){let s,a,l=[],I=!1,k=O(),g=!1;class v{constructor(o){this.name=o.meeting_name,this.startTime=this.getAdjustedStartTime(o),this.link=o.virtual_meeting_link,this.info=o.virtual_meeting_additional_info}getAdjustedStartTime(o){const y=parseInt(o.weekday_tinyint)===1?7:parseInt(o.weekday_tinyint)-1;let u=O().tz(o.time_zone||"UTC",!0).set({hour:parseInt(o.start_time.split(":")[0]),minute:parseInt(o.start_time.split(":")[1]),second:0}).isoWeekday(y);return u=u.clone().tz(O.tz.guess()),O.tz(O.tz.guess())>u&&u.add(1,"weeks"),u}}me(()=>{w()});function c(b){const o=[];if(b)for(const y of b)o.push(new v(y));return o}function h(b){const o=b.length<3?b.length:3,y=[];let u=30;for(;b.length>y.length;){for(const _ of b.filter(E=>!y.includes(E))){if(!De(_.link))continue;const E=O.tz(O.tz.guess()),L=_.startTime.diff(E,"minutes");if(L>=-10&&L<=u&&(y.push(_),y.length>=o&&u>30))break}if(y.length>=o||u>1440)break;u+=15}return y}async function w(){t(2,I=!0);try{const y=await(await _e("https://bmlt.virtual-na.org/main_server/client_interface/jsonp/?switcher=GetSearchResults&data_field_key=weekday_tinyint,start_time,time_zone,meeting_name,virtual_meeting_additional_info,virtual_meeting_link")).json(),u=c(y);t(1,a=h(u)),l=[],M(),t(2,I=!1)}catch(b){console.log("parsing failed",b)}}function M(){if(O().diff(k,"seconds")>900){w(),k=O();return}a.length?l.length==a.length&&(l.length>1?l=[l.pop()]:l=[]):t(0,s=null);const b=a.filter(o=>!l.includes(o));t(0,s=b[Math.floor(Math.random()*b.length)]),l.push(s),t(3,g=!1)}function T(b){t(3,g=!0),navigator.clipboard.writeText(b)}return[s,a,I,g,M,T,()=>T(s.link)]}class Se extends re{constructor(e){super();oe(this,e,Re,Ae,ce,{})}}function Le(m){let e,t,s,a,l,I,k,g,v;return g=new Se({}),{c(){e=f("link"),t=f("link"),s=f("meta"),a=f("meta"),l=f("script"),k=C(),pe(g.$$.fragment),this.h()},l(c){const h=ve('[data-svelte="svelte-1ouqje7"]',document.head);e=d(h,"LINK",{rel:!0,href:!0}),t=d(h,"LINK",{rel:!0,href:!0}),s=d(h,"META",{name:!0,content:!0}),a=d(h,"META",{name:!0,content:!0}),l=d(h,"SCRIPT",{src:!0,"data-auto-a11y":!0});var w=p(l);w.forEach(i),h.forEach(i),k=U(c),ge(g.$$.fragment,c),this.h()},h(){r(e,"rel","manifest"),r(e,"href","manifest.json"),r(t,"rel","apple-touch-icon"),r(t,"href","apple-icon-180.png"),r(s,"name","mobile-web-app-capable"),r(s,"content","yes"),r(a,"name","apple-mobile-web-app-capable"),r(a,"content","yes"),document.title="Random Virtual Meeting",be(l.src,I="https://use.fontawesome.com/releases/v5.15.4/js/all.js")||r(l,"src",I),r(l,"data-auto-a11y","true")},m(c,h){n(document.head,e),n(document.head,t),n(document.head,s),n(document.head,a),n(document.head,l),q(c,k,h),ke(g,c,h),v=!0},p:$,i(c){v||(Ee(g.$$.fragment,c),v=!0)},o(c){ye(g.$$.fragment,c),v=!1},d(c){i(e),i(t),i(s),i(a),i(l),c&&i(k),Ie(g,c)}}}class ze extends re{constructor(e){super();oe(this,e,null,Le,ce,{})}}export{ze as default};
