import{S as W,i as F,s as Q,e as p,k as $,t as z,c as g,n as A,a as M,g as D,d as r,b,f as S,H as a,h as G,J as X,K as Z,I as O,A as x,L as ee,M as T,j as te,N as se,m as ae,O as ne,o as le,x as re,u as ie,v as oe}from"../chunks/vendor-40fbc9ca.js";function Y(R){let n,i,f,e,l,d=R[0].name+"",s,c,t,o,_=R[0].start+"",v,m,I,k,j=R[0].link+"",y,w;return{c(){n=p("br"),i=$(),f=p("div"),e=p("p"),l=p("b"),s=z(d),c=$(),t=p("br"),o=$(),v=z(_),m=p("br"),I=$(),k=p("a"),y=z(j),this.h()},l(h){n=g(h,"BR",{}),i=A(h),f=g(h,"DIV",{class:!0});var E=M(f);e=g(E,"P",{class:!0});var u=M(e);l=g(u,"B",{});var V=M(l);s=D(V,d),V.forEach(r),c=A(u),t=g(u,"BR",{}),o=A(u),v=D(u,_),m=g(u,"BR",{}),I=A(u),k=g(u,"A",{href:!0});var B=M(k);y=D(B,j),B.forEach(r),u.forEach(r),E.forEach(r),this.h()},h(){b(k,"href",w=R[0].link),b(e,"class","title is-6"),b(f,"class","box is-shadowless has-text-centered m-0")},m(h,E){S(h,n,E),S(h,i,E),S(h,f,E),a(f,e),a(e,l),a(l,s),a(e,c),a(e,t),a(e,o),a(e,v),a(e,m),a(e,I),a(e,k),a(k,y)},p(h,E){E&1&&d!==(d=h[0].name+"")&&G(s,d),E&1&&_!==(_=h[0].start+"")&&G(v,_),E&1&&j!==(j=h[0].link+"")&&G(y,j),E&1&&w!==(w=h[0].link)&&b(k,"href",w)},d(h){h&&r(n),h&&r(i),h&&r(f)}}}function ce(R){let n,i,f,e,l,d,s=R[0]&&Y(R);return{c(){n=p("main"),i=p("button"),f=z("Get A Random Meeting"),e=$(),s&&s.c(),this.h()},l(c){n=g(c,"MAIN",{});var t=M(n);i=g(t,"BUTTON",{class:!0});var o=M(i);f=D(o,"Get A Random Meeting"),o.forEach(r),e=A(t),s&&s.l(t),t.forEach(r),this.h()},h(){b(i,"class","button is-fullwidth svelte-11hmyrt"),i.disabled=R[1],X(i,"is-loading",R[1])},m(c,t){S(c,n,t),a(n,i),a(i,f),a(n,e),s&&s.m(n,null),l||(d=Z(i,"click",R[2]),l=!0)},p(c,[t]){t&2&&(i.disabled=c[1]),t&2&&X(i,"is-loading",c[1]),c[0]?s?s.p(c,t):(s=Y(c),s.c(),s.m(n,null)):s&&(s.d(1),s=null)},i:O,o:O,d(c){c&&r(n),s&&s.d(),l=!1,d()}}}const ue=3;function de(R,n,i){let f=null,e=null,l=[],d=!1;function s(t,o,_){let v=parseInt(t)===1?7:parseInt(t)-1,m;return _||(_="UTC"),m=T().tz(_,!0).set({hour:o.split(":")[0],minute:o.split(":")[1],second:0}).isoWeekday(v),m=m.clone().tz(T.tz.guess()),T.tz(T.tz.guess())>m&&m.add(1,"weeks"),m}x(()=>{i(1,d=!0),ee("https://bmlt.virtual-na.org/main_server/client_interface/jsonp/?switcher=GetSearchResults&data_field_key=weekday_tinyint,start_time,time_zone,meeting_name,comments").then(t=>t.json()).then(t=>{if(e=[],t){let o=30;for(;e.length<ue||o>120;){for(const _ of t.filter(v=>!e.includes(v))){const v=s(_.weekday_tinyint,_.start_time,_.time_zone),m=T.tz(T.tz.guess());v.diff(m,"minutes")>=0&&v.diff(m,"minutes")<=o&&e.push({name:_.meeting_name,start:v.toString(),link:_.comments})}o+=15}}}).then(()=>c()).then(()=>i(1,d=!1)).catch(t=>console.log("parsing failed",t))});function c(){l.length==e.length&&(l.length>1?l=[l.pop()]:l=[]);const t=e.filter(o=>!l.includes(o));i(0,f=t[Math.floor(Math.random()*t.length)]),l.push(f)}return[f,d,c]}class fe extends W{constructor(n){super();F(this,n,de,ce,Q,{})}}function me(R){let n,i,f,e,l,d,s,c,t,o,_,v,m,I,k,j,y,w,h,E;return o=new fe({}),{c(){n=p("script"),f=$(),e=p("section"),l=p("div"),d=p("div"),s=p("h4"),c=z("Random Virtual Meeting"),t=$(),te(o.$$.fragment),_=$(),v=p("div"),m=p("div"),I=p("p"),k=p("a"),j=z("Ideas?"),y=z(`
        \u2022 Meetings sourced from
        `),w=p("a"),h=z("virtual-na.org"),this.h()},l(u){const V=se('[data-svelte="svelte-gzcn9j"]',document.head);n=g(V,"SCRIPT",{src:!0,"data-auto-a11y":!0});var B=M(n);B.forEach(r),V.forEach(r),f=A(u),e=g(u,"SECTION",{class:!0});var C=M(e);l=g(C,"DIV",{class:!0});var P=M(l);d=g(P,"DIV",{class:!0});var N=M(d);s=g(N,"H4",{class:!0});var H=M(s);c=D(H,"Random Virtual Meeting"),H.forEach(r),t=A(N),ae(o.$$.fragment,N),N.forEach(r),P.forEach(r),_=A(C),v=g(C,"DIV",{class:!0});var J=M(v);m=g(J,"DIV",{class:!0});var L=M(m);I=g(L,"P",{});var q=M(I);k=g(q,"A",{href:!0,target:!0});var U=M(k);j=D(U,"Ideas?"),U.forEach(r),y=D(q,`
        \u2022 Meetings sourced from
        `),w=g(q,"A",{href:!0,target:!0});var K=M(w);h=D(K,"virtual-na.org"),K.forEach(r),q.forEach(r),L.forEach(r),J.forEach(r),C.forEach(r),this.h()},h(){document.title="Random Virtual Meeting",ne(n.src,i="https://use.fontawesome.com/releases/v5.15.4/js/all.js")||b(n,"src",i),b(n,"data-auto-a11y","true"),b(s,"class","title is-4 has-text-centered"),b(d,"class","card p-5"),b(l,"class","container"),b(k,"href","https://github.com/bmlt-enabled/randomvm/issues"),b(k,"target","_blank"),b(w,"href","https://virtual-na.org/meetings"),b(w,"target","_blank"),b(m,"class","card p-5 mt-5 has-text-centered"),b(v,"class","container"),b(e,"class","section p-5")},m(u,V){a(document.head,n),S(u,f,V),S(u,e,V),a(e,l),a(l,d),a(d,s),a(s,c),a(d,t),le(o,d,null),a(e,_),a(e,v),a(v,m),a(m,I),a(I,k),a(k,j),a(I,y),a(I,w),a(w,h),E=!0},p:O,i(u){E||(re(o.$$.fragment,u),E=!0)},o(u){ie(o.$$.fragment,u),E=!1},d(u){r(n),u&&r(f),u&&r(e),oe(o)}}}class _e extends W{constructor(n){super();F(this,n,null,me,Q,{})}}export{_e as default};
