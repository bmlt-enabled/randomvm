import{S as te,i as se,s as ae,e as c,t as z,k as H,c as f,a as m,g as j,d as a,n as K,b as r,J as ne,f as O,H as l,K as le,I as x,L as B,A as re,M as oe,h as Y,j as ce,N as fe,m as ue,O as de,o as me,x as he,u as _e,v as pe}from"../chunks/vendor-06f73bce.js";function ve(h){let e;return{c(){e=z("No meetings found for the next 24 hours.")},l(t){e=j(t,"No meetings found for the next 24 hours.")},m(t,s){O(t,e,s)},p:x,d(t){t&&a(e)}}}function ge(h){let e,t=h[0].name+"",s,n,i,T,g=h[0].startTime.format("dddd")+"",v,b,_=h[0].startTime.format("h:mma")+"",k,S,M,D,N=h[0].link+"",u,d,E,p,C,R,V,W,U,y,A,q,I=h[0].info&&ie(h);function P(o,w){return o[3]?ke:be}let $=P(h),L=$(h);return{c(){e=c("h4"),s=z(t),n=H(),i=c("ul"),T=c("li"),v=z(g),b=z(" at "),k=z(_),S=H(),M=c("li"),D=c("a"),u=z(N),E=z(`
                                    \xA0`),p=H(),I&&I.c(),C=H(),R=c("div"),V=c("button"),L.c(),W=H(),U=c("span"),y=z("Copy Link"),this.h()},l(o){e=f(o,"H4",{});var w=m(e);s=j(w,t),w.forEach(a),n=K(o),i=f(o,"UL",{});var G=m(i);T=f(G,"LI",{});var F=m(T);v=j(F,g),b=j(F," at "),k=j(F,_),F.forEach(a),S=K(G),M=f(G,"LI",{class:!0});var J=m(M);D=f(J,"A",{href:!0,target:!0});var Q=m(D);u=j(Q,N),Q.forEach(a),E=j(J,`
                                    \xA0`),J.forEach(a),p=K(G),I&&I.l(G),G.forEach(a),C=K(o),R=f(o,"DIV",{class:!0});var X=m(R);V=f(X,"BUTTON",{class:!0});var Z=m(V);L.l(Z),W=K(Z),U=f(Z,"SPAN",{});var ee=m(U);y=j(ee,"Copy Link"),ee.forEach(a),Z.forEach(a),X.forEach(a),this.h()},h(){r(D,"href",d=h[0].link),r(D,"target","_blank"),r(M,"class","meeting-link svelte-14s9879"),r(V,"class","button is-small copy-button svelte-14s9879"),r(R,"class","has-text-centered")},m(o,w){O(o,e,w),l(e,s),O(o,n,w),O(o,i,w),l(i,T),l(T,v),l(T,b),l(T,k),l(i,S),l(i,M),l(M,D),l(D,u),l(M,E),l(i,p),I&&I.m(i,null),O(o,C,w),O(o,R,w),l(R,V),L.m(V,null),l(V,W),l(V,U),l(U,y),A||(q=le(V,"click",h[6]),A=!0)},p(o,w){w&1&&t!==(t=o[0].name+"")&&Y(s,t),w&1&&g!==(g=o[0].startTime.format("dddd")+"")&&Y(v,g),w&1&&_!==(_=o[0].startTime.format("h:mma")+"")&&Y(k,_),w&1&&N!==(N=o[0].link+"")&&Y(u,N),w&1&&d!==(d=o[0].link)&&r(D,"href",d),o[0].info?I?I.p(o,w):(I=ie(o),I.c(),I.m(i,null)):I&&(I.d(1),I=null),$!==($=P(o))&&(L.d(1),L=$(o),L&&(L.c(),L.m(V,W)))},d(o){o&&a(e),o&&a(n),o&&a(i),I&&I.d(),o&&a(C),o&&a(R),L.d(),A=!1,q()}}}function ie(h){let e,t=h[0].info+"",s;return{c(){e=c("li"),s=z(t)},l(n){e=f(n,"LI",{});var i=m(e);s=j(i,t),i.forEach(a)},m(n,i){O(n,e,i),l(e,s)},p(n,i){i&1&&t!==(t=n[0].info+"")&&Y(s,t)},d(n){n&&a(e)}}}function be(h){let e,t;return{c(){e=c("span"),t=c("i"),this.h()},l(s){e=f(s,"SPAN",{class:!0});var n=m(e);t=f(n,"I",{class:!0}),m(t).forEach(a),n.forEach(a),this.h()},h(){r(t,"class","far fa-copy"),r(e,"class","icon is-small")},m(s,n){O(s,e,n),l(e,t)},d(s){s&&a(e)}}}function ke(h){let e,t;return{c(){e=c("span"),t=c("i"),this.h()},l(s){e=f(s,"SPAN",{class:!0});var n=m(e);t=f(n,"I",{class:!0}),m(t).forEach(a),n.forEach(a),this.h()},h(){r(t,"class","fas fa-copy"),r(e,"class","icon is-small")},m(s,n){O(s,e,n),l(e,t)},d(s){s&&a(e)}}}function Ee(h){let e,t,s,n,i,T,g,v,b,_,k,S,M,D,N,u,d,E,p,C,R,V;function W(A,q){if(A[0])return ge;if(A[1]!==void 0)return ve}let U=W(h),y=U&&U(h);return{c(){e=c("section"),t=c("div"),s=c("div"),n=c("h4"),i=z("Random Virtual Meeting"),T=H(),g=c("div"),v=c("div"),b=c("button"),_=z("Get A Random Meeting"),k=H(),S=c("div"),M=c("div"),y&&y.c(),D=H(),N=c("div"),u=c("a"),d=z("Ideas?"),E=z(`
                \u2022 Data from
                `),p=c("a"),C=z("virtual-na.org"),this.h()},l(A){e=f(A,"SECTION",{class:!0});var q=m(e);t=f(q,"DIV",{class:!0});var I=m(t);s=f(I,"DIV",{class:!0});var P=m(s);n=f(P,"H4",{class:!0});var $=m(n);i=j($,"Random Virtual Meeting"),$.forEach(a),T=K(P),g=f(P,"DIV",{class:!0});var L=m(g);v=f(L,"DIV",{class:!0});var o=m(v);b=f(o,"BUTTON",{class:!0});var w=m(b);_=j(w,"Get A Random Meeting"),w.forEach(a),o.forEach(a),k=K(L),S=f(L,"DIV",{class:!0});var G=m(S);M=f(G,"DIV",{class:!0});var F=m(M);y&&y.l(F),F.forEach(a),G.forEach(a),L.forEach(a),D=K(P),N=f(P,"DIV",{class:!0});var J=m(N);u=f(J,"A",{href:!0,target:!0});var Q=m(u);d=j(Q,"Ideas?"),Q.forEach(a),E=j(J,`
                \u2022 Data from
                `),p=f(J,"A",{href:!0,target:!0});var X=m(p);C=j(X,"virtual-na.org"),X.forEach(a),J.forEach(a),P.forEach(a),I.forEach(a),q.forEach(a),this.h()},h(){r(n,"class","title is-4 has-text-centered"),r(b,"class","button is-fullwidth svelte-14s9879"),b.disabled=h[2],ne(b,"is-loading",h[2]),r(v,"class","block"),r(M,"class","content"),r(S,"class","block is-shadowless p-2"),r(g,"class","block"),r(u,"href","https://github.com/bmlt-enabled/randomvm/issues"),r(u,"target","_blank"),r(p,"href","https://virtual-na.org/meetings"),r(p,"target","_blank"),r(N,"class","box is-shadowless p-3 m-0 has-text-centered"),r(s,"class","card p-5"),r(t,"class","randomvm container svelte-14s9879"),r(e,"class","section p-5")},m(A,q){O(A,e,q),l(e,t),l(t,s),l(s,n),l(n,i),l(s,T),l(s,g),l(g,v),l(v,b),l(b,_),l(g,k),l(g,S),l(S,M),y&&y.m(M,null),l(s,D),l(s,N),l(N,u),l(u,d),l(N,E),l(N,p),l(p,C),R||(V=le(b,"click",h[4]),R=!0)},p(A,[q]){q&4&&(b.disabled=A[2]),q&4&&ne(b,"is-loading",A[2]),U===(U=W(A))&&y?y.p(A,q):(y&&y.d(1),y=U&&U(A),y&&(y.c(),y.m(M,null)))},i:x,o:x,d(A){A&&a(e),y&&y.d(),R=!1,V()}}}function ye(h,e,t){let s,n,i=[],T=!1,g=B(),v=!1;class b{constructor(d){this.name=d.meeting_name,this.startTime=this.getAdjustedStartTime(d),this.link=d.comments,this.info=d.location_info}getAdjustedStartTime(d){const E=parseInt(d.weekday_tinyint)===1?7:parseInt(d.weekday_tinyint)-1;let p=B().tz(d.time_zone||"UTC",!0).set({hour:parseInt(d.start_time.split(":")[0]),minute:parseInt(d.start_time.split(":")[1]),second:0}).isoWeekday(E);return p=p.clone().tz(B.tz.guess()),B.tz(B.tz.guess())>p&&p.add(1,"weeks"),p}}re(()=>{S()});function _(u){const d=[];if(u)for(const E of u)d.push(new b(E));return d}function k(u){const d=u.length<3?u.length:3,E=[];let p=30;for(;u.length>E.length;){for(const C of u.filter(R=>!E.includes(R))){if(!C.link)continue;const R=B.tz(B.tz.guess()),V=C.startTime.diff(R,"minutes");if(V>=-10&&V<=p&&(E.push(C),E.length>=d&&p>30))break}if(E.length>=d||p>1440)break;p+=15}return E}async function S(){t(2,T=!0);try{const E=await(await oe("https://bmlt.virtual-na.org/main_server/client_interface/jsonp/?switcher=GetSearchResults&data_field_key=weekday_tinyint,start_time,time_zone,meeting_name,comments,location_info")).json(),p=_(E);t(1,n=k(p)),i=[],M(),t(2,T=!1)}catch(u){console.log("parsing failed",u)}}function M(){if(B().diff(g,"seconds")>900){S(),g=B();return}n.length?i.length==n.length&&(i.length>1?i=[i.pop()]:i=[]):t(0,s=null);const u=n.filter(d=>!i.includes(d));t(0,s=u[Math.floor(Math.random()*u.length)]),i.push(s),t(3,v=!1)}function D(u){t(3,v=!0),navigator.clipboard.writeText(u)}return[s,n,T,v,M,D,()=>D(s.link)]}class Ie extends te{constructor(e){super();se(this,e,ye,Ee,ae,{})}}function we(h){let e,t,s,n,i,T,g,v,b;return v=new Ie({}),{c(){e=c("link"),t=c("link"),s=c("meta"),n=c("meta"),i=c("script"),g=H(),ce(v.$$.fragment),this.h()},l(_){const k=fe('[data-svelte="svelte-1ouqje7"]',document.head);e=f(k,"LINK",{rel:!0,href:!0}),t=f(k,"LINK",{rel:!0,href:!0}),s=f(k,"META",{name:!0,content:!0}),n=f(k,"META",{name:!0,content:!0}),i=f(k,"SCRIPT",{src:!0,"data-auto-a11y":!0});var S=m(i);S.forEach(a),k.forEach(a),g=K(_),ue(v.$$.fragment,_),this.h()},h(){r(e,"rel","manifest"),r(e,"href","manifest.json"),r(t,"rel","apple-touch-icon"),r(t,"href","apple-icon-180.png"),r(s,"name","mobile-web-app-capable"),r(s,"content","yes"),r(n,"name","apple-mobile-web-app-capable"),r(n,"content","yes"),document.title="Random Virtual Meeting",de(i.src,T="https://use.fontawesome.com/releases/v5.15.4/js/all.js")||r(i,"src",T),r(i,"data-auto-a11y","true")},m(_,k){l(document.head,e),l(document.head,t),l(document.head,s),l(document.head,n),l(document.head,i),O(_,g,k),me(v,_,k),b=!0},p:x,i(_){b||(he(v.$$.fragment,_),b=!0)},o(_){_e(v.$$.fragment,_),b=!1},d(_){a(e),a(t),a(s),a(n),a(i),_&&a(g),pe(v,_)}}}class Me extends te{constructor(e){super();se(this,e,null,we,ae,{})}}export{Me as default};
